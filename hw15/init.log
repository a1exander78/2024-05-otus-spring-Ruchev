2024-10-10T16:48:33.507+03:00  INFO 12080 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 12080 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T16:48:33.513+03:00  INFO 12080 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T16:48:36.362+03:00  INFO 12080 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T16:48:36.593+03:00  INFO 12080 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 210 ms. Found 4 JPA repository interfaces.
2024-10-10T16:48:38.093+03:00  INFO 12080 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T16:48:38.119+03:00  INFO 12080 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T16:48:38.120+03:00  INFO 12080 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T16:48:38.435+03:00  INFO 12080 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T16:48:38.437+03:00  INFO 12080 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4770 ms
2024-10-10T16:48:39.020+03:00  INFO 12080 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T16:48:39.442+03:00  INFO 12080 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T16:48:39.444+03:00  INFO 12080 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T16:48:39.570+03:00  INFO 12080 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T16:48:40.198+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T16:48:40.223+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T16:48:40.230+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T16:48:40.252+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T16:48:40.337+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T16:48:40.351+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T16:48:40.381+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T16:48:40.385+03:00  WARN 12080 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T16:48:40.386+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T16:48:40.390+03:00  WARN 12080 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T16:48:40.395+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T16:48:40.478+03:00  WARN 12080 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T16:48:40.479+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T16:48:40.482+03:00  WARN 12080 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T16:48:40.621+03:00  INFO 12080 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T16:48:40.877+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:48:41.012+03:00  INFO 12080 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T16:48:41.013+03:00  INFO 12080 --- [main] liquibase.command                        : Using deploymentId: 8568121013
2024-10-10T16:48:41.017+03:00  INFO 12080 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:48:41.063+03:00  INFO 12080 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:48:41.078+03:00  INFO 12080 --- [main] liquibase.changelog                      : Table author created
2024-10-10T16:48:41.081+03:00  INFO 12080 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 16ms
2024-10-10T16:48:41.143+03:00  INFO 12080 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:48:41.153+03:00  INFO 12080 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T16:48:41.154+03:00  INFO 12080 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 10ms
2024-10-10T16:48:41.159+03:00  INFO 12080 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:48:41.186+03:00  INFO 12080 --- [main] liquibase.changelog                      : Table book created
2024-10-10T16:48:41.187+03:00  INFO 12080 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 27ms
2024-10-10T16:48:41.199+03:00  INFO 12080 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:48:41.206+03:00  INFO 12080 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T16:48:41.208+03:00  INFO 12080 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 8ms
2024-10-10T16:48:41.220+03:00  INFO 12080 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:48:41.276+03:00  INFO 12080 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:48:41.276+03:00  INFO 12080 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T16:48:41.277+03:00  INFO 12080 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 57ms
2024-10-10T16:48:41.285+03:00  INFO 12080 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:48:41.318+03:00  INFO 12080 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:48:41.318+03:00  INFO 12080 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T16:48:41.321+03:00  INFO 12080 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 32ms
2024-10-10T16:48:41.330+03:00  INFO 12080 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:48:41.361+03:00  INFO 12080 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:48:41.361+03:00  INFO 12080 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T16:48:41.363+03:00  INFO 12080 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 32ms
2024-10-10T16:48:41.370+03:00  INFO 12080 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:48:41.395+03:00  INFO 12080 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:48:41.395+03:00  INFO 12080 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T16:48:41.396+03:00  INFO 12080 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 25ms
2024-10-10T16:48:41.406+03:00  INFO 12080 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T16:48:41.407+03:00  INFO 12080 --- [main] liquibase.util                           : Run:                          8
2024-10-10T16:48:41.407+03:00  INFO 12080 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T16:48:41.407+03:00  INFO 12080 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T16:48:41.407+03:00  INFO 12080 --- [main] liquibase.util                           : -------------------------------
2024-10-10T16:48:41.408+03:00  INFO 12080 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T16:48:41.409+03:00  INFO 12080 --- [main] liquibase.util                           : Update summary generated
2024-10-10T16:48:41.412+03:00  INFO 12080 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T16:48:41.412+03:00  INFO 12080 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T16:48:41.414+03:00  INFO 12080 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T16:48:41.415+03:00  INFO 12080 --- [main] liquibase.command                        : Command execution complete
2024-10-10T16:48:41.665+03:00  INFO 12080 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T16:48:41.791+03:00  INFO 12080 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T16:48:41.796+03:00  INFO 12080 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T16:48:42.460+03:00  INFO 12080 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T16:48:43.957+03:00  INFO 12080 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T16:48:43.963+03:00  INFO 12080 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:48:44.437+03:00  INFO 12080 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T16:48:45.115+03:00  WARN 12080 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T16:48:45.116+03:00  INFO 12080 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:48:45.119+03:00  INFO 12080 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T16:48:45.124+03:00  INFO 12080 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T16:48:45.126+03:00  INFO 12080 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T16:48:45.152+03:00  INFO 12080 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T16:48:45.182+03:00 ERROR 12080 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T16:49:24.998+03:00  INFO 2112 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 2112 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T16:49:25.004+03:00  INFO 2112 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T16:49:27.476+03:00  INFO 2112 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T16:49:27.644+03:00  INFO 2112 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 150 ms. Found 4 JPA repository interfaces.
2024-10-10T16:49:29.252+03:00  INFO 2112 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T16:49:29.276+03:00  INFO 2112 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T16:49:29.277+03:00  INFO 2112 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T16:49:29.546+03:00  INFO 2112 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T16:49:29.548+03:00  INFO 2112 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4425 ms
2024-10-10T16:49:30.079+03:00  INFO 2112 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T16:49:30.490+03:00  INFO 2112 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T16:49:30.494+03:00  INFO 2112 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T16:49:30.729+03:00  INFO 2112 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T16:49:31.373+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T16:49:31.392+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T16:49:31.399+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T16:49:31.423+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T16:49:31.477+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T16:49:31.490+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T16:49:31.497+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T16:49:31.500+03:00  WARN 2112 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T16:49:31.501+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T16:49:31.503+03:00  WARN 2112 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T16:49:31.503+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T16:49:31.504+03:00  WARN 2112 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T16:49:31.505+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T16:49:31.507+03:00  WARN 2112 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T16:49:31.573+03:00  INFO 2112 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T16:49:31.848+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:49:31.983+03:00  INFO 2112 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T16:49:31.985+03:00  INFO 2112 --- [main] liquibase.command                        : Using deploymentId: 8568171984
2024-10-10T16:49:31.988+03:00  INFO 2112 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:49:32.037+03:00  INFO 2112 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:49:32.075+03:00  INFO 2112 --- [main] liquibase.changelog                      : Table author created
2024-10-10T16:49:32.077+03:00  INFO 2112 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 37ms
2024-10-10T16:49:32.114+03:00  INFO 2112 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:49:32.132+03:00  INFO 2112 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T16:49:32.136+03:00  INFO 2112 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 18ms
2024-10-10T16:49:32.161+03:00  INFO 2112 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:49:32.188+03:00  INFO 2112 --- [main] liquibase.changelog                      : Table book created
2024-10-10T16:49:32.189+03:00  INFO 2112 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 27ms
2024-10-10T16:49:32.198+03:00  INFO 2112 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:49:32.206+03:00  INFO 2112 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T16:49:32.207+03:00  INFO 2112 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 9ms
2024-10-10T16:49:32.219+03:00  INFO 2112 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:49:32.270+03:00  INFO 2112 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:49:32.271+03:00  INFO 2112 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T16:49:32.271+03:00  INFO 2112 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 51ms
2024-10-10T16:49:32.275+03:00  INFO 2112 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:49:32.292+03:00  INFO 2112 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:49:32.293+03:00  INFO 2112 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T16:49:32.293+03:00  INFO 2112 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 18ms
2024-10-10T16:49:32.307+03:00  INFO 2112 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:49:32.346+03:00  INFO 2112 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:49:32.347+03:00  INFO 2112 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T16:49:32.349+03:00  INFO 2112 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 41ms
2024-10-10T16:49:32.361+03:00  INFO 2112 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:49:32.399+03:00  INFO 2112 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:49:32.400+03:00  INFO 2112 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T16:49:32.401+03:00  INFO 2112 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 39ms
2024-10-10T16:49:32.419+03:00  INFO 2112 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T16:49:32.419+03:00  INFO 2112 --- [main] liquibase.util                           : Run:                          8
2024-10-10T16:49:32.420+03:00  INFO 2112 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T16:49:32.420+03:00  INFO 2112 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T16:49:32.420+03:00  INFO 2112 --- [main] liquibase.util                           : -------------------------------
2024-10-10T16:49:32.420+03:00  INFO 2112 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T16:49:32.422+03:00  INFO 2112 --- [main] liquibase.util                           : Update summary generated
2024-10-10T16:49:32.427+03:00  INFO 2112 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T16:49:32.428+03:00  INFO 2112 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T16:49:32.431+03:00  INFO 2112 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T16:49:32.433+03:00  INFO 2112 --- [main] liquibase.command                        : Command execution complete
2024-10-10T16:49:32.702+03:00  INFO 2112 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T16:49:32.812+03:00  INFO 2112 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T16:49:32.817+03:00  INFO 2112 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T16:49:33.309+03:00  INFO 2112 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T16:49:34.970+03:00  INFO 2112 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T16:49:34.975+03:00  INFO 2112 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:49:35.509+03:00  INFO 2112 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T16:49:36.053+03:00  WARN 2112 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T16:49:36.054+03:00  INFO 2112 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:49:36.057+03:00  INFO 2112 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T16:49:36.062+03:00  INFO 2112 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T16:49:36.066+03:00  INFO 2112 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T16:49:36.092+03:00  INFO 2112 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T16:49:36.121+03:00 ERROR 2112 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess)]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess)]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess)]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess)]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T16:50:14.183+03:00  INFO 6236 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 6236 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T16:50:14.191+03:00  INFO 6236 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T16:50:17.259+03:00  INFO 6236 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T16:50:17.501+03:00  INFO 6236 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 222 ms. Found 4 JPA repository interfaces.
2024-10-10T16:50:19.155+03:00  INFO 6236 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T16:50:19.177+03:00  INFO 6236 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T16:50:19.177+03:00  INFO 6236 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T16:50:19.578+03:00  INFO 6236 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T16:50:19.579+03:00  INFO 6236 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5239 ms
2024-10-10T16:50:21.582+03:00  INFO 6236 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T16:50:22.296+03:00  INFO 6236 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T16:50:22.299+03:00  INFO 6236 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T16:50:22.493+03:00  INFO 6236 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T16:50:23.246+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T16:50:23.278+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T16:50:23.285+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T16:50:23.304+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T16:50:23.411+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T16:50:23.425+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T16:50:23.432+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T16:50:23.434+03:00  WARN 6236 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T16:50:23.434+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T16:50:23.435+03:00  WARN 6236 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T16:50:23.436+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T16:50:23.437+03:00  WARN 6236 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T16:50:23.438+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T16:50:23.439+03:00  WARN 6236 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T16:50:23.618+03:00  INFO 6236 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T16:50:23.878+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:50:24.092+03:00  INFO 6236 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T16:50:24.101+03:00  INFO 6236 --- [main] liquibase.command                        : Using deploymentId: 8568224094
2024-10-10T16:50:24.113+03:00  INFO 6236 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:50:24.181+03:00  INFO 6236 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:50:24.204+03:00  INFO 6236 --- [main] liquibase.changelog                      : Table author created
2024-10-10T16:50:24.213+03:00  INFO 6236 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 28ms
2024-10-10T16:50:24.247+03:00  INFO 6236 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:50:24.259+03:00  INFO 6236 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T16:50:24.261+03:00  INFO 6236 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 13ms
2024-10-10T16:50:24.271+03:00  INFO 6236 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:50:24.289+03:00  INFO 6236 --- [main] liquibase.changelog                      : Table book created
2024-10-10T16:50:24.289+03:00  INFO 6236 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 17ms
2024-10-10T16:50:24.295+03:00  INFO 6236 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:50:24.303+03:00  INFO 6236 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T16:50:24.304+03:00  INFO 6236 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 8ms
2024-10-10T16:50:24.378+03:00  INFO 6236 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:50:24.457+03:00  INFO 6236 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:50:24.458+03:00  INFO 6236 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T16:50:24.459+03:00  INFO 6236 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 80ms
2024-10-10T16:50:24.464+03:00  INFO 6236 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:50:24.478+03:00  INFO 6236 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:50:24.479+03:00  INFO 6236 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T16:50:24.479+03:00  INFO 6236 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 14ms
2024-10-10T16:50:24.486+03:00  INFO 6236 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:50:24.500+03:00  INFO 6236 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:50:24.500+03:00  INFO 6236 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T16:50:24.501+03:00  INFO 6236 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 15ms
2024-10-10T16:50:24.507+03:00  INFO 6236 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:50:24.520+03:00  INFO 6236 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:50:24.521+03:00  INFO 6236 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T16:50:24.521+03:00  INFO 6236 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 13ms
2024-10-10T16:50:24.535+03:00  INFO 6236 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T16:50:24.535+03:00  INFO 6236 --- [main] liquibase.util                           : Run:                          8
2024-10-10T16:50:24.535+03:00  INFO 6236 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T16:50:24.535+03:00  INFO 6236 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T16:50:24.536+03:00  INFO 6236 --- [main] liquibase.util                           : -------------------------------
2024-10-10T16:50:24.536+03:00  INFO 6236 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T16:50:24.538+03:00  INFO 6236 --- [main] liquibase.util                           : Update summary generated
2024-10-10T16:50:24.543+03:00  INFO 6236 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T16:50:24.544+03:00  INFO 6236 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T16:50:24.547+03:00  INFO 6236 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T16:50:24.548+03:00  INFO 6236 --- [main] liquibase.command                        : Command execution complete
2024-10-10T16:50:24.838+03:00  INFO 6236 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T16:50:24.970+03:00  INFO 6236 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T16:50:24.975+03:00  INFO 6236 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T16:50:25.640+03:00  INFO 6236 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T16:50:27.627+03:00  INFO 6236 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T16:50:27.632+03:00  INFO 6236 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:50:28.152+03:00  INFO 6236 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T16:50:28.669+03:00  WARN 6236 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T16:50:28.669+03:00  INFO 6236 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:50:28.672+03:00  INFO 6236 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T16:50:28.677+03:00  INFO 6236 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T16:50:28.680+03:00  INFO 6236 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T16:50:28.705+03:00  INFO 6236 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T16:50:28.732+03:00 ERROR 6236 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T16:52:29.329+03:00  INFO 11240 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 11240 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T16:52:29.335+03:00  INFO 11240 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T16:52:31.925+03:00  INFO 11240 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T16:52:32.100+03:00  INFO 11240 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 156 ms. Found 4 JPA repository interfaces.
2024-10-10T16:52:33.498+03:00  INFO 11240 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T16:52:33.531+03:00  INFO 11240 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T16:52:33.532+03:00  INFO 11240 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T16:52:33.749+03:00  INFO 11240 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T16:52:33.750+03:00  INFO 11240 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4304 ms
2024-10-10T16:52:34.253+03:00  INFO 11240 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T16:52:34.628+03:00  INFO 11240 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T16:52:34.631+03:00  INFO 11240 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T16:52:34.754+03:00  INFO 11240 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T16:52:35.398+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T16:52:35.419+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T16:52:35.426+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T16:52:35.461+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T16:52:35.518+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T16:52:35.529+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T16:52:35.535+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T16:52:35.537+03:00  WARN 11240 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T16:52:35.538+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T16:52:35.540+03:00  WARN 11240 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T16:52:35.540+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T16:52:35.541+03:00  WARN 11240 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T16:52:35.542+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T16:52:35.543+03:00  WARN 11240 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T16:52:35.657+03:00  INFO 11240 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T16:52:35.852+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:52:36.002+03:00  INFO 11240 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T16:52:36.004+03:00  INFO 11240 --- [main] liquibase.command                        : Using deploymentId: 8568356003
2024-10-10T16:52:36.007+03:00  INFO 11240 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:52:36.052+03:00  INFO 11240 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:52:36.065+03:00  INFO 11240 --- [main] liquibase.changelog                      : Table author created
2024-10-10T16:52:36.066+03:00  INFO 11240 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 12ms
2024-10-10T16:52:36.078+03:00  INFO 11240 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:52:36.083+03:00  INFO 11240 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T16:52:36.084+03:00  INFO 11240 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T16:52:36.089+03:00  INFO 11240 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:52:36.104+03:00  INFO 11240 --- [main] liquibase.changelog                      : Table book created
2024-10-10T16:52:36.105+03:00  INFO 11240 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 15ms
2024-10-10T16:52:36.111+03:00  INFO 11240 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:52:36.120+03:00  INFO 11240 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T16:52:36.121+03:00  INFO 11240 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 10ms
2024-10-10T16:52:36.127+03:00  INFO 11240 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:52:36.188+03:00  INFO 11240 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:52:36.189+03:00  INFO 11240 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T16:52:36.191+03:00  INFO 11240 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 63ms
2024-10-10T16:52:36.200+03:00  INFO 11240 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:52:36.245+03:00  INFO 11240 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:52:36.246+03:00  INFO 11240 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T16:52:36.249+03:00  INFO 11240 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 47ms
2024-10-10T16:52:36.266+03:00  INFO 11240 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:52:36.326+03:00  INFO 11240 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:52:36.327+03:00  INFO 11240 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T16:52:36.327+03:00  INFO 11240 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 60ms
2024-10-10T16:52:36.332+03:00  INFO 11240 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:52:36.344+03:00  INFO 11240 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:52:36.344+03:00  INFO 11240 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T16:52:36.345+03:00  INFO 11240 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 12ms
2024-10-10T16:52:36.355+03:00  INFO 11240 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T16:52:36.356+03:00  INFO 11240 --- [main] liquibase.util                           : Run:                          8
2024-10-10T16:52:36.356+03:00  INFO 11240 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T16:52:36.356+03:00  INFO 11240 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T16:52:36.357+03:00  INFO 11240 --- [main] liquibase.util                           : -------------------------------
2024-10-10T16:52:36.357+03:00  INFO 11240 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T16:52:36.358+03:00  INFO 11240 --- [main] liquibase.util                           : Update summary generated
2024-10-10T16:52:36.362+03:00  INFO 11240 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T16:52:36.362+03:00  INFO 11240 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T16:52:36.364+03:00  INFO 11240 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T16:52:36.365+03:00  INFO 11240 --- [main] liquibase.command                        : Command execution complete
2024-10-10T16:52:36.613+03:00  INFO 11240 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T16:52:36.711+03:00  INFO 11240 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T16:52:36.715+03:00  INFO 11240 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T16:52:37.215+03:00  INFO 11240 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T16:52:38.913+03:00  INFO 11240 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T16:52:38.921+03:00  INFO 11240 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:52:39.485+03:00  INFO 11240 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T16:52:40.029+03:00  WARN 11240 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T16:52:40.030+03:00  INFO 11240 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:52:40.034+03:00  INFO 11240 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T16:52:40.039+03:00  INFO 11240 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T16:52:40.042+03:00  INFO 11240 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T16:52:40.064+03:00  INFO 11240 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T16:52:40.093+03:00 ERROR 11240 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T16:56:15.968+03:00  INFO 6620 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 6620 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T16:56:15.976+03:00  INFO 6620 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T16:56:18.579+03:00  INFO 6620 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T16:56:18.752+03:00  INFO 6620 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 155 ms. Found 4 JPA repository interfaces.
2024-10-10T16:56:20.434+03:00  INFO 6620 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T16:56:20.459+03:00  INFO 6620 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T16:56:20.460+03:00  INFO 6620 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T16:56:20.723+03:00  INFO 6620 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T16:56:20.724+03:00  INFO 6620 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4608 ms
2024-10-10T16:56:21.239+03:00  INFO 6620 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T16:56:21.658+03:00  INFO 6620 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T16:56:21.661+03:00  INFO 6620 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T16:56:21.781+03:00  INFO 6620 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T16:56:22.335+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T16:56:22.357+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T16:56:22.363+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T16:56:22.431+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T16:56:22.519+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T16:56:22.528+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T16:56:22.537+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T16:56:22.542+03:00  WARN 6620 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T16:56:22.543+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T16:56:22.546+03:00  WARN 6620 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T16:56:22.547+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T16:56:22.554+03:00  WARN 6620 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T16:56:22.555+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T16:56:22.561+03:00  WARN 6620 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T16:56:22.653+03:00  INFO 6620 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T16:56:22.901+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:56:23.038+03:00  INFO 6620 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T16:56:23.039+03:00  INFO 6620 --- [main] liquibase.command                        : Using deploymentId: 8568583039
2024-10-10T16:56:23.043+03:00  INFO 6620 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T16:56:23.111+03:00  INFO 6620 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:56:23.138+03:00  INFO 6620 --- [main] liquibase.changelog                      : Table author created
2024-10-10T16:56:23.140+03:00  INFO 6620 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 27ms
2024-10-10T16:56:23.156+03:00  INFO 6620 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:56:23.160+03:00  INFO 6620 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T16:56:23.160+03:00  INFO 6620 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 4ms
2024-10-10T16:56:23.166+03:00  INFO 6620 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:56:23.183+03:00  INFO 6620 --- [main] liquibase.changelog                      : Table book created
2024-10-10T16:56:23.184+03:00  INFO 6620 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 18ms
2024-10-10T16:56:23.191+03:00  INFO 6620 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:56:23.198+03:00  INFO 6620 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T16:56:23.198+03:00  INFO 6620 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 6ms
2024-10-10T16:56:23.207+03:00  INFO 6620 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T16:56:23.272+03:00  INFO 6620 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:56:23.272+03:00  INFO 6620 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T16:56:23.272+03:00  INFO 6620 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 65ms
2024-10-10T16:56:23.277+03:00  INFO 6620 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T16:56:23.286+03:00  INFO 6620 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:56:23.286+03:00  INFO 6620 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T16:56:23.286+03:00  INFO 6620 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 9ms
2024-10-10T16:56:23.295+03:00  INFO 6620 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T16:56:23.309+03:00  INFO 6620 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:56:23.310+03:00  INFO 6620 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T16:56:23.311+03:00  INFO 6620 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 16ms
2024-10-10T16:56:23.322+03:00  INFO 6620 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T16:56:23.350+03:00  INFO 6620 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T16:56:23.353+03:00  INFO 6620 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T16:56:23.354+03:00  INFO 6620 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 31ms
2024-10-10T16:56:23.376+03:00  INFO 6620 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T16:56:23.376+03:00  INFO 6620 --- [main] liquibase.util                           : Run:                          8
2024-10-10T16:56:23.377+03:00  INFO 6620 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T16:56:23.377+03:00  INFO 6620 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T16:56:23.377+03:00  INFO 6620 --- [main] liquibase.util                           : -------------------------------
2024-10-10T16:56:23.377+03:00  INFO 6620 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T16:56:23.379+03:00  INFO 6620 --- [main] liquibase.util                           : Update summary generated
2024-10-10T16:56:23.387+03:00  INFO 6620 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T16:56:23.387+03:00  INFO 6620 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T16:56:23.394+03:00  INFO 6620 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T16:56:23.396+03:00  INFO 6620 --- [main] liquibase.command                        : Command execution complete
2024-10-10T16:56:23.562+03:00  INFO 6620 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T16:56:23.711+03:00  INFO 6620 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T16:56:23.716+03:00  INFO 6620 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T16:56:24.222+03:00  INFO 6620 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T16:56:25.803+03:00  INFO 6620 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T16:56:25.808+03:00  INFO 6620 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:56:26.281+03:00  INFO 6620 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T16:56:26.882+03:00  WARN 6620 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T16:56:26.882+03:00  INFO 6620 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T16:56:26.886+03:00  INFO 6620 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T16:56:26.890+03:00  INFO 6620 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T16:56:26.894+03:00  INFO 6620 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T16:56:26.915+03:00  INFO 6620 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T16:56:26.949+03:00 ERROR 6620 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T17:02:09.938+03:00  INFO 8560 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 8560 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:02:09.944+03:00  INFO 8560 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:02:12.349+03:00  INFO 8560 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:02:12.523+03:00  INFO 8560 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 154 ms. Found 4 JPA repository interfaces.
2024-10-10T17:02:13.876+03:00  INFO 8560 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:02:13.891+03:00  INFO 8560 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:02:13.892+03:00  INFO 8560 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:02:14.105+03:00  INFO 8560 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:02:14.107+03:00  INFO 8560 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4043 ms
2024-10-10T17:02:14.613+03:00  INFO 8560 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:02:14.991+03:00  INFO 8560 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:02:14.994+03:00  INFO 8560 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:02:15.133+03:00  INFO 8560 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:02:15.760+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:02:15.788+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:02:15.794+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:02:15.816+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:02:15.921+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:02:15.933+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:02:15.939+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:02:15.940+03:00  WARN 8560 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:02:15.941+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:02:15.943+03:00  WARN 8560 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:02:15.943+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:02:15.944+03:00  WARN 8560 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:02:15.945+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:02:15.947+03:00  WARN 8560 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:02:16.074+03:00  INFO 8560 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:02:16.268+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:02:16.421+03:00  INFO 8560 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:02:16.423+03:00  INFO 8560 --- [main] liquibase.command                        : Using deploymentId: 8568936423
2024-10-10T17:02:16.427+03:00  INFO 8560 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:02:16.473+03:00  INFO 8560 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:02:16.489+03:00  INFO 8560 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:02:16.491+03:00  INFO 8560 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 14ms
2024-10-10T17:02:16.502+03:00  INFO 8560 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:02:16.507+03:00  INFO 8560 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:02:16.508+03:00  INFO 8560 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 6ms
2024-10-10T17:02:16.515+03:00  INFO 8560 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:02:16.529+03:00  INFO 8560 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:02:16.529+03:00  INFO 8560 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 13ms
2024-10-10T17:02:16.535+03:00  INFO 8560 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:02:16.542+03:00  INFO 8560 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:02:16.543+03:00  INFO 8560 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 8ms
2024-10-10T17:02:16.549+03:00  INFO 8560 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:02:16.602+03:00  INFO 8560 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:02:16.602+03:00  INFO 8560 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:02:16.603+03:00  INFO 8560 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 53ms
2024-10-10T17:02:16.607+03:00  INFO 8560 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:02:16.618+03:00  INFO 8560 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:02:16.619+03:00  INFO 8560 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:02:16.619+03:00  INFO 8560 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 12ms
2024-10-10T17:02:16.626+03:00  INFO 8560 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:02:16.672+03:00  INFO 8560 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:02:16.673+03:00  INFO 8560 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:02:16.674+03:00  INFO 8560 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 47ms
2024-10-10T17:02:16.683+03:00  INFO 8560 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:02:16.703+03:00  INFO 8560 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:02:16.704+03:00  INFO 8560 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:02:16.704+03:00  INFO 8560 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 21ms
2024-10-10T17:02:16.723+03:00  INFO 8560 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:02:16.723+03:00  INFO 8560 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:02:16.723+03:00  INFO 8560 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:02:16.724+03:00  INFO 8560 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:02:16.724+03:00  INFO 8560 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:02:16.724+03:00  INFO 8560 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:02:16.726+03:00  INFO 8560 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:02:16.731+03:00  INFO 8560 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:02:16.731+03:00  INFO 8560 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:02:16.734+03:00  INFO 8560 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:02:16.735+03:00  INFO 8560 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:02:16.959+03:00  INFO 8560 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:02:17.095+03:00  INFO 8560 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:02:17.100+03:00  INFO 8560 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:02:17.635+03:00  INFO 8560 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:02:19.078+03:00  INFO 8560 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:02:19.084+03:00  INFO 8560 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:02:19.562+03:00  INFO 8560 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:02:20.013+03:00  WARN 8560 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:02:20.014+03:00  INFO 8560 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:02:20.017+03:00  INFO 8560 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:02:20.022+03:00  INFO 8560 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:02:20.026+03:00  INFO 8560 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:02:20.053+03:00  INFO 8560 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:02:20.084+03:00 ERROR 8560 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: A query exception occurred [select sum (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.SemanticException: A query exception occurred [select sum (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:130) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:77) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: org.hibernate.query.sqm.ParsingException: line 1:19 no viable alternative at input 'selectsum(select1'
	at org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:46) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:543) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportNoViableAlternative(DefaultErrorStrategy.java:310) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:136) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.hibernate.grammars.hql.HqlParser.queryExpression(HqlParser.java:1780) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser.selectStatement(HqlParser.java:400) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser.statement(HqlParser.java:331) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:116) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 62 common frames omitted

2024-10-10T17:03:12.676+03:00  INFO 9056 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 9056 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:03:12.684+03:00  INFO 9056 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:03:15.398+03:00  INFO 9056 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:03:15.582+03:00  INFO 9056 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 166 ms. Found 4 JPA repository interfaces.
2024-10-10T17:03:16.998+03:00  INFO 9056 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:03:17.028+03:00  INFO 9056 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:03:17.029+03:00  INFO 9056 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:03:17.246+03:00  INFO 9056 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:03:17.247+03:00  INFO 9056 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4347 ms
2024-10-10T17:03:17.808+03:00  INFO 9056 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:03:18.175+03:00  INFO 9056 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:03:18.178+03:00  INFO 9056 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:03:18.308+03:00  INFO 9056 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:03:18.946+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:03:18.970+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:03:18.976+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:03:18.995+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:03:19.072+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:03:19.109+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:03:19.116+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:03:19.118+03:00  WARN 9056 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:03:19.119+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:03:19.120+03:00  WARN 9056 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:03:19.121+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:03:19.123+03:00  WARN 9056 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:03:19.123+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:03:19.125+03:00  WARN 9056 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:03:19.270+03:00  INFO 9056 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:03:19.451+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:03:19.593+03:00  INFO 9056 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:03:19.596+03:00  INFO 9056 --- [main] liquibase.command                        : Using deploymentId: 8568999595
2024-10-10T17:03:19.599+03:00  INFO 9056 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:03:19.648+03:00  INFO 9056 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:03:19.661+03:00  INFO 9056 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:03:19.663+03:00  INFO 9056 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 12ms
2024-10-10T17:03:19.673+03:00  INFO 9056 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:03:19.677+03:00  INFO 9056 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:03:19.678+03:00  INFO 9056 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 4ms
2024-10-10T17:03:19.685+03:00  INFO 9056 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:03:19.698+03:00  INFO 9056 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:03:19.698+03:00  INFO 9056 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 13ms
2024-10-10T17:03:19.705+03:00  INFO 9056 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:03:19.711+03:00  INFO 9056 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:03:19.712+03:00  INFO 9056 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T17:03:19.718+03:00  INFO 9056 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:03:19.774+03:00  INFO 9056 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:03:19.775+03:00  INFO 9056 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:03:19.776+03:00  INFO 9056 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 57ms
2024-10-10T17:03:19.784+03:00  INFO 9056 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:03:19.816+03:00  INFO 9056 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:03:19.817+03:00  INFO 9056 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:03:19.817+03:00  INFO 9056 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 31ms
2024-10-10T17:03:19.833+03:00  INFO 9056 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:03:19.872+03:00  INFO 9056 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:03:19.874+03:00  INFO 9056 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:03:19.875+03:00  INFO 9056 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 40ms
2024-10-10T17:03:19.885+03:00  INFO 9056 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:03:19.918+03:00  INFO 9056 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:03:19.919+03:00  INFO 9056 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:03:19.920+03:00  INFO 9056 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 34ms
2024-10-10T17:03:19.934+03:00  INFO 9056 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:03:19.934+03:00  INFO 9056 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:03:19.934+03:00  INFO 9056 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:03:19.934+03:00  INFO 9056 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:03:19.934+03:00  INFO 9056 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:03:19.934+03:00  INFO 9056 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:03:19.936+03:00  INFO 9056 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:03:19.940+03:00  INFO 9056 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:03:19.940+03:00  INFO 9056 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:03:19.945+03:00  INFO 9056 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:03:19.947+03:00  INFO 9056 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:03:20.247+03:00  INFO 9056 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:03:20.429+03:00  INFO 9056 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:03:20.436+03:00  INFO 9056 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:03:20.995+03:00  INFO 9056 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:03:22.841+03:00  INFO 9056 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:03:22.849+03:00  INFO 9056 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:03:23.635+03:00  INFO 9056 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:03:24.176+03:00  WARN 9056 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:03:24.177+03:00  INFO 9056 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:03:24.180+03:00  INFO 9056 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:03:24.185+03:00  INFO 9056 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:03:24.188+03:00  INFO 9056 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:03:24.214+03:00  INFO 9056 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:03:24.248+03:00 ERROR 9056 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: A query exception occurred [select sum(select 1 from Comment as c group by c.book.id having count(*) > :excess)]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.SemanticException: A query exception occurred [select sum(select 1 from Comment as c group by c.book.id having count(*) > :excess)]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:130) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:77) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: org.hibernate.query.sqm.ParsingException: line 1:18 no viable alternative at input 'selectsum(select1'
	at org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:46) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:543) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportNoViableAlternative(DefaultErrorStrategy.java:310) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:136) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.hibernate.grammars.hql.HqlParser.queryExpression(HqlParser.java:1780) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser.selectStatement(HqlParser.java:400) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser.statement(HqlParser.java:331) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:116) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 62 common frames omitted

2024-10-10T17:03:33.241+03:00  INFO 11024 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 11024 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:03:33.246+03:00  INFO 11024 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:03:35.838+03:00  INFO 11024 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:03:36.112+03:00  INFO 11024 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 248 ms. Found 4 JPA repository interfaces.
2024-10-10T17:03:37.884+03:00  INFO 11024 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:03:37.911+03:00  INFO 11024 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:03:37.912+03:00  INFO 11024 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:03:38.326+03:00  INFO 11024 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:03:38.327+03:00  INFO 11024 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4963 ms
2024-10-10T17:03:39.002+03:00  INFO 11024 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:03:39.558+03:00  INFO 11024 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:03:39.562+03:00  INFO 11024 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:03:39.715+03:00  INFO 11024 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:03:40.627+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:03:40.654+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:03:40.662+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:03:40.684+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:03:40.736+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:03:40.750+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:03:40.758+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:03:40.761+03:00  WARN 11024 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:03:40.762+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:03:40.764+03:00  WARN 11024 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:03:40.765+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:03:40.766+03:00  WARN 11024 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:03:40.768+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:03:40.769+03:00  WARN 11024 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:03:40.826+03:00  INFO 11024 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:03:41.165+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:03:41.295+03:00  INFO 11024 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:03:41.297+03:00  INFO 11024 --- [main] liquibase.command                        : Using deploymentId: 8569021297
2024-10-10T17:03:41.301+03:00  INFO 11024 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:03:41.347+03:00  INFO 11024 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:03:41.360+03:00  INFO 11024 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:03:41.361+03:00  INFO 11024 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 12ms
2024-10-10T17:03:41.386+03:00  INFO 11024 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:03:41.405+03:00  INFO 11024 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:03:41.412+03:00  INFO 11024 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 24ms
2024-10-10T17:03:41.436+03:00  INFO 11024 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:03:41.462+03:00  INFO 11024 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:03:41.463+03:00  INFO 11024 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 26ms
2024-10-10T17:03:41.473+03:00  INFO 11024 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:03:41.479+03:00  INFO 11024 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:03:41.480+03:00  INFO 11024 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T17:03:41.487+03:00  INFO 11024 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:03:41.547+03:00  INFO 11024 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:03:41.547+03:00  INFO 11024 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:03:41.548+03:00  INFO 11024 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 61ms
2024-10-10T17:03:41.553+03:00  INFO 11024 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:03:41.566+03:00  INFO 11024 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:03:41.566+03:00  INFO 11024 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:03:41.567+03:00  INFO 11024 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 13ms
2024-10-10T17:03:41.576+03:00  INFO 11024 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:03:41.592+03:00  INFO 11024 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:03:41.593+03:00  INFO 11024 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:03:41.594+03:00  INFO 11024 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 17ms
2024-10-10T17:03:41.606+03:00  INFO 11024 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:03:41.639+03:00  INFO 11024 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:03:41.640+03:00  INFO 11024 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:03:41.641+03:00  INFO 11024 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 33ms
2024-10-10T17:03:41.678+03:00  INFO 11024 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:03:41.678+03:00  INFO 11024 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:03:41.678+03:00  INFO 11024 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:03:41.678+03:00  INFO 11024 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:03:41.680+03:00  INFO 11024 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:03:41.682+03:00  INFO 11024 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:03:41.685+03:00  INFO 11024 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:03:41.695+03:00  INFO 11024 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:03:41.697+03:00  INFO 11024 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:03:41.705+03:00  INFO 11024 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:03:41.707+03:00  INFO 11024 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:03:41.913+03:00  INFO 11024 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:03:42.026+03:00  INFO 11024 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:03:42.032+03:00  INFO 11024 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:03:42.553+03:00  INFO 11024 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:03:44.073+03:00  INFO 11024 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:03:44.081+03:00  INFO 11024 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:03:44.588+03:00  INFO 11024 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:03:44.850+03:00  WARN 11024 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:03:44.850+03:00  INFO 11024 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:03:44.852+03:00  INFO 11024 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:03:44.855+03:00  INFO 11024 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:03:44.858+03:00  INFO 11024 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:03:44.880+03:00  INFO 11024 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:03:44.913+03:00 ERROR 11024 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: A query exception occurred [sum(select 1 from Comment as c group by c.book.id having count(*) > :excess)]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.SemanticException: A query exception occurred [sum(select 1 from Comment as c group by c.book.id having count(*) > :excess)]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:130) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:77) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: org.hibernate.query.sqm.ParsingException: line 1:0 no viable alternative at input 'sum'
	at org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:46) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:543) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportNoViableAlternative(DefaultErrorStrategy.java:310) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:136) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.hibernate.grammars.hql.HqlParser.statement(HqlParser.java:361) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:116) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 62 common frames omitted

2024-10-10T17:06:25.446+03:00  INFO 6476 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 6476 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:06:25.452+03:00  INFO 6476 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:06:27.883+03:00  INFO 6476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:06:28.058+03:00  INFO 6476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 158 ms. Found 4 JPA repository interfaces.
2024-10-10T17:06:29.441+03:00  INFO 6476 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:06:29.461+03:00  INFO 6476 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:06:29.462+03:00  INFO 6476 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:06:29.720+03:00  INFO 6476 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:06:29.721+03:00  INFO 6476 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4160 ms
2024-10-10T17:06:30.192+03:00  INFO 6476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:06:30.559+03:00  INFO 6476 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:06:30.562+03:00  INFO 6476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:06:30.695+03:00  INFO 6476 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:06:31.242+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:06:31.273+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:06:31.280+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:06:31.302+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:06:31.376+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:06:31.392+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:06:31.398+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:06:31.400+03:00  WARN 6476 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:06:31.401+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:06:31.403+03:00  WARN 6476 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:06:31.403+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:06:31.405+03:00  WARN 6476 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:06:31.405+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:06:31.407+03:00  WARN 6476 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:06:31.502+03:00  INFO 6476 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:06:31.701+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:06:31.852+03:00  INFO 6476 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:06:31.854+03:00  INFO 6476 --- [main] liquibase.command                        : Using deploymentId: 8569191854
2024-10-10T17:06:31.858+03:00  INFO 6476 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:06:31.901+03:00  INFO 6476 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:06:31.917+03:00  INFO 6476 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:06:31.919+03:00  INFO 6476 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 15ms
2024-10-10T17:06:31.929+03:00  INFO 6476 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:06:31.934+03:00  INFO 6476 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:06:31.935+03:00  INFO 6476 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T17:06:31.942+03:00  INFO 6476 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:06:31.958+03:00  INFO 6476 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:06:31.959+03:00  INFO 6476 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 16ms
2024-10-10T17:06:31.965+03:00  INFO 6476 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:06:31.972+03:00  INFO 6476 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:06:31.973+03:00  INFO 6476 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T17:06:31.979+03:00  INFO 6476 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:06:32.046+03:00  INFO 6476 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:06:32.046+03:00  INFO 6476 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:06:32.047+03:00  INFO 6476 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 68ms
2024-10-10T17:06:32.061+03:00  INFO 6476 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:06:32.111+03:00  INFO 6476 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:06:32.122+03:00  INFO 6476 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:06:32.126+03:00  INFO 6476 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 63ms
2024-10-10T17:06:32.148+03:00  INFO 6476 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:06:32.191+03:00  INFO 6476 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:06:32.193+03:00  INFO 6476 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:06:32.196+03:00  INFO 6476 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 47ms
2024-10-10T17:06:32.204+03:00  INFO 6476 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:06:32.228+03:00  INFO 6476 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:06:32.229+03:00  INFO 6476 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:06:32.230+03:00  INFO 6476 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 25ms
2024-10-10T17:06:32.284+03:00  INFO 6476 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:06:32.287+03:00  INFO 6476 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:06:32.288+03:00  INFO 6476 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:06:32.288+03:00  INFO 6476 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:06:32.291+03:00  INFO 6476 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:06:32.298+03:00  INFO 6476 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:06:32.301+03:00  INFO 6476 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:06:32.310+03:00  INFO 6476 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:06:32.310+03:00  INFO 6476 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:06:32.316+03:00  INFO 6476 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:06:32.318+03:00  INFO 6476 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:06:32.618+03:00  INFO 6476 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:06:32.761+03:00  INFO 6476 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:06:32.768+03:00  INFO 6476 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:06:33.261+03:00  INFO 6476 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:06:34.422+03:00  INFO 6476 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:06:34.427+03:00  INFO 6476 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:06:34.874+03:00  INFO 6476 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:06:35.462+03:00  WARN 6476 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:06:35.465+03:00  INFO 6476 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:06:35.468+03:00  INFO 6476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:06:35.473+03:00  INFO 6476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:06:35.477+03:00  INFO 6476 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:06:35.506+03:00  INFO 6476 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:06:35.542+03:00 ERROR 6476 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T17:10:57.098+03:00  INFO 5992 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 5992 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:10:57.104+03:00  INFO 5992 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:10:59.485+03:00  INFO 5992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:10:59.665+03:00  INFO 5992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 162 ms. Found 4 JPA repository interfaces.
2024-10-10T17:11:01.066+03:00  INFO 5992 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:11:01.087+03:00  INFO 5992 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:11:01.087+03:00  INFO 5992 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:11:01.310+03:00  INFO 5992 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:11:01.311+03:00  INFO 5992 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4086 ms
2024-10-10T17:11:01.765+03:00  INFO 5992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:11:02.114+03:00  INFO 5992 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:11:02.118+03:00  INFO 5992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:11:02.255+03:00  INFO 5992 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:11:02.888+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:11:02.909+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:11:02.916+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:11:02.934+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:11:02.991+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:11:03.012+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:11:03.019+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:11:03.021+03:00  WARN 5992 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:11:03.021+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:11:03.023+03:00  WARN 5992 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:11:03.024+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:11:03.025+03:00  WARN 5992 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:11:03.026+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:11:03.028+03:00  WARN 5992 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:11:03.198+03:00  INFO 5992 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:11:03.414+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:11:03.667+03:00  INFO 5992 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:11:03.670+03:00  INFO 5992 --- [main] liquibase.command                        : Using deploymentId: 8569463670
2024-10-10T17:11:03.674+03:00  INFO 5992 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:11:03.730+03:00  INFO 5992 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:11:03.750+03:00  INFO 5992 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:11:03.751+03:00  INFO 5992 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 19ms
2024-10-10T17:11:03.769+03:00  INFO 5992 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:11:03.773+03:00  INFO 5992 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:11:03.774+03:00  INFO 5992 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 4ms
2024-10-10T17:11:03.787+03:00  INFO 5992 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:11:03.809+03:00  INFO 5992 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:11:03.810+03:00  INFO 5992 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 22ms
2024-10-10T17:11:03.820+03:00  INFO 5992 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:11:03.827+03:00  INFO 5992 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:11:03.828+03:00  INFO 5992 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T17:11:03.837+03:00  INFO 5992 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:11:03.964+03:00  INFO 5992 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:11:03.964+03:00  INFO 5992 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:11:03.965+03:00  INFO 5992 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 126ms
2024-10-10T17:11:03.982+03:00  INFO 5992 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:11:03.994+03:00  INFO 5992 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:11:03.994+03:00  INFO 5992 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:11:03.995+03:00  INFO 5992 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 12ms
2024-10-10T17:11:04.004+03:00  INFO 5992 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:11:04.023+03:00  INFO 5992 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:11:04.024+03:00  INFO 5992 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:11:04.024+03:00  INFO 5992 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 20ms
2024-10-10T17:11:04.032+03:00  INFO 5992 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:11:04.055+03:00  INFO 5992 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:11:04.055+03:00  INFO 5992 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:11:04.056+03:00  INFO 5992 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 23ms
2024-10-10T17:11:04.075+03:00  INFO 5992 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:11:04.076+03:00  INFO 5992 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:11:04.076+03:00  INFO 5992 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:11:04.076+03:00  INFO 5992 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:11:04.076+03:00  INFO 5992 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:11:04.076+03:00  INFO 5992 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:11:04.078+03:00  INFO 5992 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:11:04.083+03:00  INFO 5992 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:11:04.083+03:00  INFO 5992 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:11:04.086+03:00  INFO 5992 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:11:04.088+03:00  INFO 5992 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:11:04.283+03:00  INFO 5992 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:11:04.401+03:00  INFO 5992 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:11:04.405+03:00  INFO 5992 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:11:04.939+03:00  INFO 5992 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:11:06.488+03:00  INFO 5992 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:11:06.495+03:00  INFO 5992 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:11:06.983+03:00  INFO 5992 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:11:07.601+03:00  WARN 5992 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:11:07.603+03:00  INFO 5992 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:11:07.608+03:00  INFO 5992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:11:07.613+03:00  INFO 5992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:11:07.616+03:00  INFO 5992 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:11:07.639+03:00  INFO 5992 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:11:07.672+03:00 ERROR 5992 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T17:11:49.192+03:00  INFO 4484 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 4484 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:11:49.202+03:00  INFO 4484 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:11:51.935+03:00  INFO 4484 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:11:52.124+03:00  INFO 4484 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 173 ms. Found 4 JPA repository interfaces.
2024-10-10T17:11:53.664+03:00  INFO 4484 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:11:53.687+03:00  INFO 4484 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:11:53.688+03:00  INFO 4484 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:11:53.953+03:00  INFO 4484 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:11:53.954+03:00  INFO 4484 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4629 ms
2024-10-10T17:11:54.489+03:00  INFO 4484 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:11:54.836+03:00  INFO 4484 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:11:54.838+03:00  INFO 4484 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:11:54.967+03:00  INFO 4484 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:11:55.526+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:11:55.548+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:11:55.554+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:11:55.579+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:11:55.665+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:11:55.677+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:11:55.685+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:11:55.687+03:00  WARN 4484 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:11:55.687+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:11:55.689+03:00  WARN 4484 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:11:55.689+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:11:55.690+03:00  WARN 4484 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:11:55.691+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:11:55.692+03:00  WARN 4484 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:11:55.823+03:00  INFO 4484 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:11:56.066+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:11:56.220+03:00  INFO 4484 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:11:56.222+03:00  INFO 4484 --- [main] liquibase.command                        : Using deploymentId: 8569516221
2024-10-10T17:11:56.225+03:00  INFO 4484 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:11:56.317+03:00  INFO 4484 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:11:56.336+03:00  INFO 4484 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:11:56.338+03:00  INFO 4484 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 18ms
2024-10-10T17:11:56.351+03:00  INFO 4484 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:11:56.356+03:00  INFO 4484 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:11:56.357+03:00  INFO 4484 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T17:11:56.367+03:00  INFO 4484 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:11:56.385+03:00  INFO 4484 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:11:56.385+03:00  INFO 4484 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 17ms
2024-10-10T17:11:56.392+03:00  INFO 4484 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:11:56.402+03:00  INFO 4484 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:11:56.403+03:00  INFO 4484 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 10ms
2024-10-10T17:11:56.413+03:00  INFO 4484 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:11:56.473+03:00  INFO 4484 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:11:56.474+03:00  INFO 4484 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:11:56.474+03:00  INFO 4484 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 60ms
2024-10-10T17:11:56.480+03:00  INFO 4484 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:11:56.491+03:00  INFO 4484 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:11:56.492+03:00  INFO 4484 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:11:56.492+03:00  INFO 4484 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 11ms
2024-10-10T17:11:56.498+03:00  INFO 4484 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:11:56.514+03:00  INFO 4484 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:11:56.515+03:00  INFO 4484 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:11:56.516+03:00  INFO 4484 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 17ms
2024-10-10T17:11:56.522+03:00  INFO 4484 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:11:56.568+03:00  INFO 4484 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:11:56.569+03:00  INFO 4484 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:11:56.570+03:00  INFO 4484 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 47ms
2024-10-10T17:11:56.599+03:00  INFO 4484 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:11:56.599+03:00  INFO 4484 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:11:56.600+03:00  INFO 4484 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:11:56.600+03:00  INFO 4484 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:11:56.601+03:00  INFO 4484 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:11:56.601+03:00  INFO 4484 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:11:56.603+03:00  INFO 4484 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:11:56.609+03:00  INFO 4484 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:11:56.610+03:00  INFO 4484 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:11:56.616+03:00  INFO 4484 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:11:56.618+03:00  INFO 4484 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:11:56.806+03:00  INFO 4484 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:11:56.952+03:00  INFO 4484 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:11:56.956+03:00  INFO 4484 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:11:57.439+03:00  INFO 4484 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:11:58.925+03:00  INFO 4484 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:11:58.930+03:00  INFO 4484 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:11:59.408+03:00  INFO 4484 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:12:00.033+03:00  WARN 4484 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:12:00.036+03:00  INFO 4484 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:12:00.039+03:00  INFO 4484 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:12:00.050+03:00  INFO 4484 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:12:00.054+03:00  INFO 4484 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:12:00.092+03:00  INFO 4484 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:12:00.132+03:00 ERROR 4484 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as r]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as r]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as r]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select 1 from Comment as c group by c.book.id having count(*) > :excess) as r]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T17:16:14.150+03:00  INFO 9732 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 9732 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:16:14.157+03:00  INFO 9732 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:16:16.637+03:00  INFO 9732 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:16:16.823+03:00  INFO 9732 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 171 ms. Found 4 JPA repository interfaces.
2024-10-10T17:16:18.346+03:00  INFO 9732 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:16:18.367+03:00  INFO 9732 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:16:18.368+03:00  INFO 9732 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:16:18.629+03:00  INFO 9732 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:16:18.631+03:00  INFO 9732 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4358 ms
2024-10-10T17:16:19.193+03:00  INFO 9732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:16:19.556+03:00  INFO 9732 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:16:19.558+03:00  INFO 9732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:16:19.700+03:00  INFO 9732 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:16:20.279+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:16:20.304+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:16:20.310+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:16:20.332+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:16:20.444+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:16:20.460+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:16:20.468+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:16:20.471+03:00  WARN 9732 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:16:20.471+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:16:20.472+03:00  WARN 9732 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:16:20.473+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:16:20.474+03:00  WARN 9732 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:16:20.475+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:16:20.477+03:00  WARN 9732 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:16:20.599+03:00  INFO 9732 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:16:20.757+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:16:20.923+03:00  INFO 9732 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:16:20.925+03:00  INFO 9732 --- [main] liquibase.command                        : Using deploymentId: 8569780924
2024-10-10T17:16:20.927+03:00  INFO 9732 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:16:20.976+03:00  INFO 9732 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:16:20.991+03:00  INFO 9732 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:16:20.992+03:00  INFO 9732 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 14ms
2024-10-10T17:16:21.005+03:00  INFO 9732 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:16:21.009+03:00  INFO 9732 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:16:21.009+03:00  INFO 9732 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 4ms
2024-10-10T17:16:21.016+03:00  INFO 9732 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:16:21.028+03:00  INFO 9732 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:16:21.029+03:00  INFO 9732 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 12ms
2024-10-10T17:16:21.035+03:00  INFO 9732 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:16:21.042+03:00  INFO 9732 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:16:21.043+03:00  INFO 9732 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T17:16:21.048+03:00  INFO 9732 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:16:21.114+03:00  INFO 9732 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:16:21.114+03:00  INFO 9732 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:16:21.115+03:00  INFO 9732 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 66ms
2024-10-10T17:16:21.120+03:00  INFO 9732 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:16:21.166+03:00  INFO 9732 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:16:21.167+03:00  INFO 9732 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:16:21.169+03:00  INFO 9732 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 48ms
2024-10-10T17:16:21.196+03:00  INFO 9732 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:16:21.242+03:00  INFO 9732 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:16:21.243+03:00  INFO 9732 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:16:21.246+03:00  INFO 9732 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 49ms
2024-10-10T17:16:21.252+03:00  INFO 9732 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:16:21.264+03:00  INFO 9732 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:16:21.264+03:00  INFO 9732 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:16:21.265+03:00  INFO 9732 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 13ms
2024-10-10T17:16:21.278+03:00  INFO 9732 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:16:21.279+03:00  INFO 9732 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:16:21.279+03:00  INFO 9732 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:16:21.280+03:00  INFO 9732 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:16:21.280+03:00  INFO 9732 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:16:21.280+03:00  INFO 9732 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:16:21.282+03:00  INFO 9732 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:16:21.287+03:00  INFO 9732 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:16:21.287+03:00  INFO 9732 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:16:21.291+03:00  INFO 9732 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:16:21.292+03:00  INFO 9732 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:16:21.454+03:00  INFO 9732 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:16:21.565+03:00  INFO 9732 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:16:21.569+03:00  INFO 9732 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:16:21.996+03:00  INFO 9732 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:16:23.542+03:00  INFO 9732 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:16:23.547+03:00  INFO 9732 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:16:24.049+03:00  INFO 9732 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:16:24.626+03:00  WARN 9732 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:16:24.627+03:00  INFO 9732 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:16:24.630+03:00  INFO 9732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:16:24.634+03:00  INFO 9732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:16:24.638+03:00  INFO 9732 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:16:24.662+03:00  INFO 9732 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:16:24.696+03:00 ERROR 9732 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select c from Comment as c group by c.book.id having count(*) > :excess) as r]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select c from Comment as c group by c.book.id having count(*) > :excess) as r]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(*) from (select c from Comment as c group by c.book.id having count(*) > :excess) as r]; this may indicate a semantic (user query) problem or a bug in the parser [select count(*) from (select c from Comment as c group by c.book.id having count(*) > :excess) as r]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T17:17:32.833+03:00  INFO 11036 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 11036 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:17:32.839+03:00  INFO 11036 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:17:35.354+03:00  INFO 11036 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:17:35.542+03:00  INFO 11036 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 167 ms. Found 4 JPA repository interfaces.
2024-10-10T17:17:37.084+03:00  INFO 11036 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:17:37.099+03:00  INFO 11036 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:17:37.100+03:00  INFO 11036 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:17:37.322+03:00  INFO 11036 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:17:37.323+03:00  INFO 11036 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4375 ms
2024-10-10T17:17:37.801+03:00  INFO 11036 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:17:38.150+03:00  INFO 11036 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:17:38.153+03:00  INFO 11036 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:17:38.282+03:00  INFO 11036 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:17:38.916+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:17:38.952+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:17:38.967+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:17:39.034+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:17:39.109+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:17:39.133+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:17:39.148+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:17:39.155+03:00  WARN 11036 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:17:39.155+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:17:39.157+03:00  WARN 11036 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:17:39.158+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:17:39.164+03:00  WARN 11036 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:17:39.165+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:17:39.166+03:00  WARN 11036 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:17:39.235+03:00  INFO 11036 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:17:39.462+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:17:39.613+03:00  INFO 11036 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:17:39.615+03:00  INFO 11036 --- [main] liquibase.command                        : Using deploymentId: 8569859615
2024-10-10T17:17:39.619+03:00  INFO 11036 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:17:39.669+03:00  INFO 11036 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:17:39.728+03:00  INFO 11036 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:17:39.729+03:00  INFO 11036 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 16ms
2024-10-10T17:17:39.743+03:00  INFO 11036 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:17:39.748+03:00  INFO 11036 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:17:39.749+03:00  INFO 11036 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T17:17:39.755+03:00  INFO 11036 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:17:39.773+03:00  INFO 11036 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:17:39.773+03:00  INFO 11036 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 17ms
2024-10-10T17:17:39.780+03:00  INFO 11036 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:17:39.787+03:00  INFO 11036 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:17:39.788+03:00  INFO 11036 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T17:17:39.793+03:00  INFO 11036 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:17:39.858+03:00  INFO 11036 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:17:39.858+03:00  INFO 11036 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:17:39.858+03:00  INFO 11036 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 65ms
2024-10-10T17:17:39.865+03:00  INFO 11036 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:17:39.897+03:00  INFO 11036 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:17:39.898+03:00  INFO 11036 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:17:39.903+03:00  INFO 11036 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 36ms
2024-10-10T17:17:39.924+03:00  INFO 11036 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:17:39.990+03:00  INFO 11036 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:17:39.992+03:00  INFO 11036 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:17:39.996+03:00  INFO 11036 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 72ms
2024-10-10T17:17:40.006+03:00  INFO 11036 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:17:40.039+03:00  INFO 11036 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:17:40.039+03:00  INFO 11036 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:17:40.040+03:00  INFO 11036 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 34ms
2024-10-10T17:17:40.061+03:00  INFO 11036 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:17:40.062+03:00  INFO 11036 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:17:40.062+03:00  INFO 11036 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:17:40.062+03:00  INFO 11036 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:17:40.063+03:00  INFO 11036 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:17:40.063+03:00  INFO 11036 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:17:40.065+03:00  INFO 11036 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:17:40.071+03:00  INFO 11036 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:17:40.071+03:00  INFO 11036 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:17:40.074+03:00  INFO 11036 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:17:40.076+03:00  INFO 11036 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:17:40.366+03:00  INFO 11036 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:17:40.512+03:00  INFO 11036 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:17:40.519+03:00  INFO 11036 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:17:40.994+03:00  INFO 11036 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:17:42.610+03:00  INFO 11036 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:17:42.615+03:00  INFO 11036 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:17:43.111+03:00  INFO 11036 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:17:43.754+03:00  WARN 11036 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:17:43.755+03:00  INFO 11036 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:17:43.757+03:00  INFO 11036 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:17:43.761+03:00  INFO 11036 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:17:43.764+03:00  INFO 11036 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:17:43.786+03:00  INFO 11036 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:17:43.810+03:00 ERROR 11036 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(r) from (select c from Comment as c group by c.book.id having count(*) > :excess) as r]; this may indicate a semantic (user query) problem or a bug in the parser [select count(r) from (select c from Comment as c group by c.book.id having count(*) > :excess) as r]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select count(r) from (select c from Comment as c group by c.book.id having count(*) > :excess) as r]; this may indicate a semantic (user query) problem or a bug in the parser [select count(r) from (select c from Comment as c group by c.book.id having count(*) > :excess) as r]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T17:18:46.234+03:00  INFO 12404 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 12404 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:18:46.240+03:00  INFO 12404 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:18:48.714+03:00  INFO 12404 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:18:48.895+03:00  INFO 12404 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 162 ms. Found 4 JPA repository interfaces.
2024-10-10T17:18:50.315+03:00  INFO 12404 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:18:50.336+03:00  INFO 12404 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:18:50.337+03:00  INFO 12404 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:18:50.559+03:00  INFO 12404 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:18:50.562+03:00  INFO 12404 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4212 ms
2024-10-10T17:18:51.063+03:00  INFO 12404 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:18:51.435+03:00  INFO 12404 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:18:51.438+03:00  INFO 12404 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:18:51.563+03:00  INFO 12404 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:18:52.118+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:18:52.138+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:18:52.146+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:18:52.170+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:18:52.235+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:18:52.247+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:18:52.254+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:18:52.256+03:00  WARN 12404 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:18:52.257+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:18:52.258+03:00  WARN 12404 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:18:52.259+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:18:52.260+03:00  WARN 12404 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:18:52.261+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:18:52.262+03:00  WARN 12404 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:18:52.340+03:00  INFO 12404 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:18:52.591+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:18:52.726+03:00  INFO 12404 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:18:52.728+03:00  INFO 12404 --- [main] liquibase.command                        : Using deploymentId: 8569932727
2024-10-10T17:18:52.731+03:00  INFO 12404 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:18:52.780+03:00  INFO 12404 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:18:52.794+03:00  INFO 12404 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:18:52.797+03:00  INFO 12404 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 15ms
2024-10-10T17:18:52.841+03:00  INFO 12404 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:18:52.848+03:00  INFO 12404 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:18:52.849+03:00  INFO 12404 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 7ms
2024-10-10T17:18:52.857+03:00  INFO 12404 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:18:52.875+03:00  INFO 12404 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:18:52.876+03:00  INFO 12404 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 17ms
2024-10-10T17:18:52.884+03:00  INFO 12404 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:18:52.891+03:00  INFO 12404 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:18:52.893+03:00  INFO 12404 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 8ms
2024-10-10T17:18:52.899+03:00  INFO 12404 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:18:52.960+03:00  INFO 12404 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:18:52.961+03:00  INFO 12404 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:18:52.961+03:00  INFO 12404 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 61ms
2024-10-10T17:18:52.967+03:00  INFO 12404 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:18:52.980+03:00  INFO 12404 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:18:52.981+03:00  INFO 12404 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:18:52.982+03:00  INFO 12404 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 14ms
2024-10-10T17:18:52.989+03:00  INFO 12404 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:18:53.033+03:00  INFO 12404 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:18:53.033+03:00  INFO 12404 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:18:53.035+03:00  INFO 12404 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 45ms
2024-10-10T17:18:53.044+03:00  INFO 12404 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:18:53.070+03:00  INFO 12404 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:18:53.071+03:00  INFO 12404 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:18:53.072+03:00  INFO 12404 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 28ms
2024-10-10T17:18:53.120+03:00  INFO 12404 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:18:53.120+03:00  INFO 12404 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:18:53.120+03:00  INFO 12404 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:18:53.121+03:00  INFO 12404 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:18:53.123+03:00  INFO 12404 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:18:53.123+03:00  INFO 12404 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:18:53.128+03:00  INFO 12404 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:18:53.133+03:00  INFO 12404 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:18:53.134+03:00  INFO 12404 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:18:53.138+03:00  INFO 12404 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:18:53.140+03:00  INFO 12404 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:18:53.254+03:00  INFO 12404 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:18:53.400+03:00  INFO 12404 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:18:53.404+03:00  INFO 12404 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:18:53.897+03:00  INFO 12404 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:18:55.289+03:00  INFO 12404 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:18:55.294+03:00  INFO 12404 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:18:55.781+03:00  INFO 12404 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:18:56.340+03:00  WARN 12404 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:18:56.341+03:00  INFO 12404 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:18:56.345+03:00  INFO 12404 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:18:56.349+03:00  INFO 12404 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:18:56.352+03:00  INFO 12404 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:18:56.374+03:00  INFO 12404 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:18:56.406+03:00 ERROR 12404 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select sum(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select sum(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select sum(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select sum(*) from (select 1 from Comment c group by c.book.id having count(*) > :excess) as result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T17:19:48.534+03:00  INFO 1416 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 1416 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:19:48.540+03:00  INFO 1416 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:19:51.223+03:00  INFO 1416 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:19:51.397+03:00  INFO 1416 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 157 ms. Found 4 JPA repository interfaces.
2024-10-10T17:19:52.732+03:00  INFO 1416 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:19:52.754+03:00  INFO 1416 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:19:52.755+03:00  INFO 1416 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:19:52.972+03:00  INFO 1416 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:19:52.973+03:00  INFO 1416 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4318 ms
2024-10-10T17:19:53.450+03:00  INFO 1416 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:19:53.812+03:00  INFO 1416 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:19:53.815+03:00  INFO 1416 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:19:53.948+03:00  INFO 1416 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:19:54.573+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:19:54.596+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:19:54.602+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:19:54.620+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:19:54.682+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:19:54.694+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:19:54.701+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:19:54.703+03:00  WARN 1416 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:19:54.704+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:19:54.705+03:00  WARN 1416 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:19:54.705+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:19:54.706+03:00  WARN 1416 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:19:54.707+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:19:54.708+03:00  WARN 1416 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:19:54.789+03:00  INFO 1416 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:19:55.042+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:19:55.190+03:00  INFO 1416 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:19:55.192+03:00  INFO 1416 --- [main] liquibase.command                        : Using deploymentId: 8569995192
2024-10-10T17:19:55.196+03:00  INFO 1416 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:19:55.263+03:00  INFO 1416 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:19:55.297+03:00  INFO 1416 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:19:55.299+03:00  INFO 1416 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 28ms
2024-10-10T17:19:55.314+03:00  INFO 1416 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:19:55.318+03:00  INFO 1416 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:19:55.319+03:00  INFO 1416 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T17:19:55.325+03:00  INFO 1416 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:19:55.349+03:00  INFO 1416 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:19:55.350+03:00  INFO 1416 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 24ms
2024-10-10T17:19:55.357+03:00  INFO 1416 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:19:55.371+03:00  INFO 1416 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:19:55.371+03:00  INFO 1416 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 14ms
2024-10-10T17:19:55.376+03:00  INFO 1416 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:19:55.458+03:00  INFO 1416 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:19:55.458+03:00  INFO 1416 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:19:55.459+03:00  INFO 1416 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 79ms
2024-10-10T17:19:55.469+03:00  INFO 1416 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:19:55.488+03:00  INFO 1416 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:19:55.490+03:00  INFO 1416 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:19:55.491+03:00  INFO 1416 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 21ms
2024-10-10T17:19:55.517+03:00  INFO 1416 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:19:55.575+03:00  INFO 1416 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:19:55.575+03:00  INFO 1416 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:19:55.576+03:00  INFO 1416 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 58ms
2024-10-10T17:19:55.584+03:00  INFO 1416 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:19:55.598+03:00  INFO 1416 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:19:55.599+03:00  INFO 1416 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:19:55.600+03:00  INFO 1416 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 15ms
2024-10-10T17:19:55.614+03:00  INFO 1416 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:19:55.614+03:00  INFO 1416 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:19:55.615+03:00  INFO 1416 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:19:55.615+03:00  INFO 1416 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:19:55.615+03:00  INFO 1416 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:19:55.616+03:00  INFO 1416 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:19:55.617+03:00  INFO 1416 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:19:55.623+03:00  INFO 1416 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:19:55.624+03:00  INFO 1416 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:19:55.627+03:00  INFO 1416 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:19:55.629+03:00  INFO 1416 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:19:55.831+03:00  INFO 1416 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:19:55.930+03:00  INFO 1416 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:19:55.935+03:00  INFO 1416 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:19:56.427+03:00  INFO 1416 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:19:57.931+03:00  INFO 1416 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:19:57.937+03:00  INFO 1416 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:19:58.407+03:00  INFO 1416 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:19:59.031+03:00  WARN 1416 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T17:19:59.034+03:00  INFO 1416 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:19:59.036+03:00  INFO 1416 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:19:59.048+03:00  INFO 1416 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:19:59.053+03:00  INFO 1416 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T17:19:59.085+03:00  INFO 1416 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T17:19:59.121+03:00 ERROR 1416 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select sum(*) from (select 1 from Comment c group by c.book.id having count(c) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select sum(*) from (select 1 from Comment c group by c.book.id having count(c) > :excess) as result]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [select sum(*) from (select 1 from Comment c group by c.book.id having count(c) > :excess) as result]; this may indicate a semantic (user query) problem or a bug in the parser [select sum(*) from (select 1 from Comment c group by c.book.id having count(c) > :excess) as result]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted
Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:61) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.derived.AnonymousTupleType.<init>(AnonymousTupleType.java:50) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.domain.SqmDerivedRoot.<init>(SqmDerivedRoot.java:35) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:2029) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootSubquery(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$RootSubqueryContext.accept(HqlParser.java:2451) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1874) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1865) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1141) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 61 common frames omitted

2024-10-10T17:24:22.237+03:00  INFO 11816 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 11816 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:24:22.243+03:00  INFO 11816 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:24:24.756+03:00  INFO 11816 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:24:24.929+03:00  INFO 11816 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 157 ms. Found 4 JPA repository interfaces.
2024-10-10T17:24:26.373+03:00  INFO 11816 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:24:26.396+03:00  INFO 11816 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:24:26.396+03:00  INFO 11816 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:24:26.704+03:00  INFO 11816 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:24:26.705+03:00  INFO 11816 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4350 ms
2024-10-10T17:24:27.183+03:00  INFO 11816 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:24:27.587+03:00  INFO 11816 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:24:27.590+03:00  INFO 11816 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:24:27.711+03:00  INFO 11816 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:24:28.282+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:24:28.306+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:24:28.316+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:24:28.334+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:24:28.380+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:24:28.394+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:24:28.401+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:24:28.403+03:00  WARN 11816 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:24:28.404+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:24:28.406+03:00  WARN 11816 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:24:28.406+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:24:28.407+03:00  WARN 11816 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:24:28.409+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:24:28.411+03:00  WARN 11816 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:24:28.534+03:00  INFO 11816 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:24:28.807+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:24:28.943+03:00  INFO 11816 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:24:28.944+03:00  INFO 11816 --- [main] liquibase.command                        : Using deploymentId: 8570268944
2024-10-10T17:24:28.948+03:00  INFO 11816 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:24:29.000+03:00  INFO 11816 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:24:29.019+03:00  INFO 11816 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:24:29.027+03:00  INFO 11816 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 25ms
2024-10-10T17:24:29.053+03:00  INFO 11816 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:24:29.065+03:00  INFO 11816 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:24:29.066+03:00  INFO 11816 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T17:24:29.072+03:00  INFO 11816 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:24:29.094+03:00  INFO 11816 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:24:29.095+03:00  INFO 11816 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 21ms
2024-10-10T17:24:29.102+03:00  INFO 11816 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:24:29.108+03:00  INFO 11816 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:24:29.109+03:00  INFO 11816 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T17:24:29.115+03:00  INFO 11816 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:24:29.173+03:00  INFO 11816 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:24:29.173+03:00  INFO 11816 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:24:29.174+03:00  INFO 11816 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 58ms
2024-10-10T17:24:29.179+03:00  INFO 11816 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:24:29.191+03:00  INFO 11816 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:24:29.192+03:00  INFO 11816 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:24:29.192+03:00  INFO 11816 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 13ms
2024-10-10T17:24:29.198+03:00  INFO 11816 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:24:29.213+03:00  INFO 11816 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:24:29.213+03:00  INFO 11816 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:24:29.214+03:00  INFO 11816 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 15ms
2024-10-10T17:24:29.218+03:00  INFO 11816 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:24:29.247+03:00  INFO 11816 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:24:29.248+03:00  INFO 11816 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:24:29.249+03:00  INFO 11816 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 30ms
2024-10-10T17:24:29.279+03:00  INFO 11816 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:24:29.280+03:00  INFO 11816 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:24:29.280+03:00  INFO 11816 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:24:29.280+03:00  INFO 11816 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:24:29.284+03:00  INFO 11816 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:24:29.285+03:00  INFO 11816 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:24:29.290+03:00  INFO 11816 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:24:29.301+03:00  INFO 11816 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:24:29.301+03:00  INFO 11816 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:24:29.305+03:00  INFO 11816 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:24:29.306+03:00  INFO 11816 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:24:29.437+03:00  INFO 11816 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:24:29.593+03:00  INFO 11816 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:24:29.597+03:00  INFO 11816 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:24:30.096+03:00  INFO 11816 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:24:31.452+03:00  INFO 11816 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:24:31.456+03:00  INFO 11816 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:24:31.958+03:00  INFO 11816 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:24:34.517+03:00  INFO 11816 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T17:24:34.679+03:00  INFO 11816 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T17:24:34.701+03:00  INFO 11816 --- [main] ru.otus.hw.Application                   : Started Application in 13.425 seconds (process running for 14.298)
2024-10-10T17:24:48.718+03:00  INFO 11816 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T17:24:48.719+03:00  INFO 11816 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T17:24:48.723+03:00  INFO 11816 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-10-10T17:25:57.975+03:00  INFO 11816 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:25:57.979+03:00  INFO 11816 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:25:57.983+03:00  INFO 11816 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:26:08.965+03:00  INFO 1704 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 1704 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:26:08.971+03:00  INFO 1704 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:26:11.377+03:00  INFO 1704 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:26:11.548+03:00  INFO 1704 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 152 ms. Found 4 JPA repository interfaces.
2024-10-10T17:26:12.978+03:00  INFO 1704 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:26:12.997+03:00  INFO 1704 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:26:12.998+03:00  INFO 1704 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:26:13.193+03:00  INFO 1704 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:26:13.196+03:00  INFO 1704 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4103 ms
2024-10-10T17:26:13.674+03:00  INFO 1704 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:26:14.039+03:00  INFO 1704 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:26:14.041+03:00  INFO 1704 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:26:14.166+03:00  INFO 1704 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:26:14.718+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:26:14.743+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:26:14.750+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:26:14.808+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:26:14.903+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:26:14.915+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:26:14.985+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:26:14.989+03:00  WARN 1704 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:26:14.990+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:26:14.993+03:00  WARN 1704 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:26:14.994+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:26:14.999+03:00  WARN 1704 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:26:15.000+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:26:15.006+03:00  WARN 1704 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:26:15.098+03:00  INFO 1704 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:26:15.348+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:26:15.486+03:00  INFO 1704 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:26:15.487+03:00  INFO 1704 --- [main] liquibase.command                        : Using deploymentId: 8570375487
2024-10-10T17:26:15.490+03:00  INFO 1704 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:26:15.538+03:00  INFO 1704 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:26:15.556+03:00  INFO 1704 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:26:15.559+03:00  INFO 1704 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 19ms
2024-10-10T17:26:15.597+03:00  INFO 1704 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:26:15.603+03:00  INFO 1704 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:26:15.604+03:00  INFO 1704 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 6ms
2024-10-10T17:26:15.612+03:00  INFO 1704 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:26:15.629+03:00  INFO 1704 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:26:15.630+03:00  INFO 1704 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 17ms
2024-10-10T17:26:15.636+03:00  INFO 1704 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:26:15.645+03:00  INFO 1704 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:26:15.645+03:00  INFO 1704 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 8ms
2024-10-10T17:26:15.652+03:00  INFO 1704 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:26:15.714+03:00  INFO 1704 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:26:15.715+03:00  INFO 1704 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:26:15.716+03:00  INFO 1704 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 62ms
2024-10-10T17:26:15.722+03:00  INFO 1704 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:26:15.735+03:00  INFO 1704 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:26:15.736+03:00  INFO 1704 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:26:15.737+03:00  INFO 1704 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 15ms
2024-10-10T17:26:15.746+03:00  INFO 1704 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:26:15.765+03:00  INFO 1704 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:26:15.766+03:00  INFO 1704 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:26:15.769+03:00  INFO 1704 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 23ms
2024-10-10T17:26:15.784+03:00  INFO 1704 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:26:15.817+03:00  INFO 1704 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:26:15.818+03:00  INFO 1704 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:26:15.820+03:00  INFO 1704 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 34ms
2024-10-10T17:26:15.841+03:00  INFO 1704 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:26:15.842+03:00  INFO 1704 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:26:15.843+03:00  INFO 1704 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:26:15.844+03:00  INFO 1704 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:26:15.844+03:00  INFO 1704 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:26:15.844+03:00  INFO 1704 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:26:15.846+03:00  INFO 1704 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:26:15.852+03:00  INFO 1704 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:26:15.853+03:00  INFO 1704 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:26:15.857+03:00  INFO 1704 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:26:15.859+03:00  INFO 1704 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:26:16.049+03:00  INFO 1704 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:26:16.178+03:00  INFO 1704 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:26:16.182+03:00  INFO 1704 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:26:16.666+03:00  INFO 1704 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:26:18.000+03:00  INFO 1704 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:26:18.005+03:00  INFO 1704 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:26:18.479+03:00  INFO 1704 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:26:20.881+03:00  INFO 1704 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T17:26:21.007+03:00  INFO 1704 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T17:26:21.028+03:00  INFO 1704 --- [main] ru.otus.hw.Application                   : Started Application in 12.969 seconds (process running for 13.82)
2024-10-10T17:26:23.152+03:00  INFO 1704 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T17:26:23.153+03:00  INFO 1704 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T17:26:23.156+03:00  INFO 1704 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-10-10T17:26:23.566+03:00 ERROR 1704 --- [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "org.hibernate.query.ReturnableType.getJavaType()" because "argType" is null] with root cause

java.lang.NullPointerException: Cannot invoke "org.hibernate.query.ReturnableType.getJavaType()" because "argType" is null
	at org.hibernate.dialect.function.SumReturnTypeResolver.resolveFunctionReturnType(SumReturnTypeResolver.java:71) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.function.SelfRenderingSqmFunction.resolveResultType(SelfRenderingSqmFunction.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.function.SelfRenderingSqmAggregateFunction.convertToSqlAst(SelfRenderingSqmAggregateFunction.java:77) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitFunction(BaseSqmToSqlAstConverter.java:6018) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitFunction(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.expression.SqmFunction.accept(SqmFunction.java:66) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelection(BaseSqmToSqlAstConverter.java:2265) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectClause(BaseSqmToSqlAstConverter.java:2207) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQuerySpec(BaseSqmToSqlAstConverter.java:2051) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQuerySpec(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.select.SqmQuerySpec.accept(SqmQuerySpec.java:125) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.spi.BaseSemanticQueryWalker.visitQueryPart(BaseSemanticQueryWalker.java:226) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQueryPart(BaseSqmToSqlAstConverter.java:1909) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectStatement(BaseSqmToSqlAstConverter.java:1594) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectStatement(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.select.SqmSelectStatement.accept(SqmSelectStatement.java:222) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.translate(BaseSqmToSqlAstConverter.java:771) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.buildCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:345) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:268) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:244) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:518) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:473) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy170.getSingleResult(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy148.findBooksWithCommentsExcess(Unknown Source) ~[na:na]
	at ru.otus.hw.actuator.MaxCountOfCommentsHealthIndicator.health(MaxCountOfCommentsHealthIndicator.java:23) ~[classes/:na]
	at org.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.getHealth(HealthEndpointWebExtension.java:94) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.getHealth(HealthEndpointWebExtension.java:47) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getLoggedHealth(HealthEndpointSupport.java:172) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:145) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateContribution(HealthEndpointSupport.java:156) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:141) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:110) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:81) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:80) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:69) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281) ~[spring-core-6.0.13.jar:6.0.13]
	at org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:74) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$ServletWebOperationAdapter.handle(AbstractWebMvcEndpointHandlerMapping.java:321) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(AbstractWebMvcEndpointHandlerMapping.java:428) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.15.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.15.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2024-10-10T17:27:13.999+03:00 ERROR 1704 --- [http-nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "org.hibernate.query.ReturnableType.getJavaType()" because "argType" is null] with root cause

java.lang.NullPointerException: Cannot invoke "org.hibernate.query.ReturnableType.getJavaType()" because "argType" is null
	at org.hibernate.dialect.function.SumReturnTypeResolver.resolveFunctionReturnType(SumReturnTypeResolver.java:71) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.function.SelfRenderingSqmFunction.resolveResultType(SelfRenderingSqmFunction.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.function.SelfRenderingSqmAggregateFunction.convertToSqlAst(SelfRenderingSqmAggregateFunction.java:77) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitFunction(BaseSqmToSqlAstConverter.java:6018) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitFunction(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.expression.SqmFunction.accept(SqmFunction.java:66) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelection(BaseSqmToSqlAstConverter.java:2265) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectClause(BaseSqmToSqlAstConverter.java:2207) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQuerySpec(BaseSqmToSqlAstConverter.java:2051) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQuerySpec(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.select.SqmQuerySpec.accept(SqmQuerySpec.java:125) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.spi.BaseSemanticQueryWalker.visitQueryPart(BaseSemanticQueryWalker.java:226) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQueryPart(BaseSqmToSqlAstConverter.java:1909) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectStatement(BaseSqmToSqlAstConverter.java:1594) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectStatement(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.tree.select.SqmSelectStatement.accept(SqmSelectStatement.java:222) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.translate(BaseSqmToSqlAstConverter.java:771) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.buildCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:345) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:268) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:244) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:518) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:473) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy170.getSingleResult(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy148.findBooksWithCommentsExcess(Unknown Source) ~[na:na]
	at ru.otus.hw.actuator.MaxCountOfCommentsHealthIndicator.health(MaxCountOfCommentsHealthIndicator.java:23) ~[classes/:na]
	at org.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.getHealth(HealthEndpointWebExtension.java:94) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.getHealth(HealthEndpointWebExtension.java:47) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getLoggedHealth(HealthEndpointSupport.java:172) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:145) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateContribution(HealthEndpointSupport.java:156) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:141) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:110) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:81) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:80) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:69) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281) ~[spring-core-6.0.13.jar:6.0.13]
	at org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:74) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$ServletWebOperationAdapter.handle(AbstractWebMvcEndpointHandlerMapping.java:321) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(AbstractWebMvcEndpointHandlerMapping.java:428) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.15.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.15.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2024-10-10T17:27:19.936+03:00  INFO 1704 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:27:19.939+03:00  INFO 1704 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T17:27:19.943+03:00  INFO 1704 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T17:58:18.830+03:00  INFO 6192 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 6192 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T17:58:18.838+03:00  INFO 6192 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T17:58:21.550+03:00  INFO 6192 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T17:58:21.743+03:00  INFO 6192 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 180 ms. Found 4 JPA repository interfaces.
2024-10-10T17:58:23.240+03:00  INFO 6192 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T17:58:23.263+03:00  INFO 6192 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T17:58:23.263+03:00  INFO 6192 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T17:58:23.476+03:00  INFO 6192 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T17:58:23.477+03:00  INFO 6192 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4510 ms
2024-10-10T17:58:24.061+03:00  INFO 6192 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T17:58:24.403+03:00  INFO 6192 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T17:58:24.405+03:00  INFO 6192 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T17:58:24.524+03:00  INFO 6192 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T17:58:25.172+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T17:58:25.194+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T17:58:25.201+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T17:58:25.225+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T17:58:25.285+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T17:58:25.297+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T17:58:25.304+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T17:58:25.306+03:00  WARN 6192 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T17:58:25.306+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T17:58:25.308+03:00  WARN 6192 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T17:58:25.308+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T17:58:25.309+03:00  WARN 6192 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T17:58:25.310+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T17:58:25.312+03:00  WARN 6192 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T17:58:25.401+03:00  INFO 6192 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T17:58:25.633+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:58:25.764+03:00  INFO 6192 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T17:58:25.766+03:00  INFO 6192 --- [main] liquibase.command                        : Using deploymentId: 8572305765
2024-10-10T17:58:25.769+03:00  INFO 6192 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T17:58:25.829+03:00  INFO 6192 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:58:25.858+03:00  INFO 6192 --- [main] liquibase.changelog                      : Table author created
2024-10-10T17:58:25.861+03:00  INFO 6192 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 28ms
2024-10-10T17:58:25.884+03:00  INFO 6192 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:58:25.888+03:00  INFO 6192 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T17:58:25.889+03:00  INFO 6192 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T17:58:25.896+03:00  INFO 6192 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:58:25.913+03:00  INFO 6192 --- [main] liquibase.changelog                      : Table book created
2024-10-10T17:58:25.914+03:00  INFO 6192 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 16ms
2024-10-10T17:58:25.921+03:00  INFO 6192 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:58:25.929+03:00  INFO 6192 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T17:58:25.929+03:00  INFO 6192 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T17:58:25.936+03:00  INFO 6192 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T17:58:25.993+03:00  INFO 6192 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:58:25.994+03:00  INFO 6192 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T17:58:25.995+03:00  INFO 6192 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 58ms
2024-10-10T17:58:26.002+03:00  INFO 6192 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T17:58:26.014+03:00  INFO 6192 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:58:26.015+03:00  INFO 6192 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T17:58:26.016+03:00  INFO 6192 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 14ms
2024-10-10T17:58:26.023+03:00  INFO 6192 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T17:58:26.038+03:00  INFO 6192 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:58:26.038+03:00  INFO 6192 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T17:58:26.039+03:00  INFO 6192 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 15ms
2024-10-10T17:58:26.043+03:00  INFO 6192 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T17:58:26.053+03:00  INFO 6192 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T17:58:26.054+03:00  INFO 6192 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T17:58:26.054+03:00  INFO 6192 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 10ms
2024-10-10T17:58:26.065+03:00  INFO 6192 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T17:58:26.066+03:00  INFO 6192 --- [main] liquibase.util                           : Run:                          8
2024-10-10T17:58:26.067+03:00  INFO 6192 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T17:58:26.067+03:00  INFO 6192 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T17:58:26.068+03:00  INFO 6192 --- [main] liquibase.util                           : -------------------------------
2024-10-10T17:58:26.068+03:00  INFO 6192 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T17:58:26.070+03:00  INFO 6192 --- [main] liquibase.util                           : Update summary generated
2024-10-10T17:58:26.076+03:00  INFO 6192 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T17:58:26.076+03:00  INFO 6192 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T17:58:26.079+03:00  INFO 6192 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T17:58:26.082+03:00  INFO 6192 --- [main] liquibase.command                        : Command execution complete
2024-10-10T17:58:26.263+03:00  INFO 6192 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T17:58:26.436+03:00  INFO 6192 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T17:58:26.441+03:00  INFO 6192 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T17:58:26.972+03:00  INFO 6192 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T17:58:28.613+03:00  INFO 6192 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T17:58:28.621+03:00  INFO 6192 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T17:58:29.107+03:00  INFO 6192 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T17:58:31.837+03:00  INFO 6192 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T17:58:32.004+03:00  INFO 6192 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T17:58:32.026+03:00  INFO 6192 --- [main] ru.otus.hw.Application                   : Started Application in 14.177 seconds (process running for 15.023)
2024-10-10T17:58:41.084+03:00  INFO 6192 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T17:58:41.086+03:00  INFO 6192 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T17:58:41.089+03:00  INFO 6192 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-10-10T17:58:58.675+03:00  WARN 6192 --- [http-nio-8080-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 90016, SQLState: 90016
2024-10-10T17:58:58.676+03:00 ERROR 6192 --- [http-nio-8080-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Столбец "C2_0.ID" должен быть в предложении GROUP BY
Column "C2_0.ID" must be in the GROUP BY list; SQL statement:
select count(c1_0.book_id) from comment c1_0 where c1_0.id in(select c2_0.id from comment c2_0 group by c2_0.book_id having count(*)>?) [90016-220]
2024-10-10T17:58:58.693+03:00 ERROR 6192 --- [http-nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [select count(c1_0.book_id) from comment c1_0 where c1_0.id in(select c2_0.id from comment c2_0 group by c2_0.book_id having count(*)>?)] [Столбец "C2_0.ID" должен быть в предложении GROUP BY
Column "C2_0.ID" must be in the GROUP BY list; SQL statement:
select count(c1_0.book_id) from comment c1_0 where c1_0.id in(select c2_0.id from comment c2_0 group by c2_0.book_id having count(*)>?) [90016-220]] [n/a]; SQL [n/a]] with root cause

org.h2.jdbc.JdbcSQLSyntaxErrorException: Столбец "C2_0.ID" должен быть в предложении GROUP BY
Column "C2_0.ID" must be in the GROUP BY list; SQL statement:
select count(c1_0.book_id) from comment c1_0 where c1_0.id in(select c2_0.id from comment c2_0 group by c2_0.book_id having count(*)>?) [90016-220]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.expression.ExpressionColumn.updateAggregate(ExpressionColumn.java:266) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Select.updateAgg(Select.java:539) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Select$LazyResultGroupSorted.fetchNextRow(Select.java:1930) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.result.LazyResult.hasNext(LazyResult.java:78) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.result.FetchedResult.next(FetchedResult.java:34) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Select.queryGroupSorted(Select.java:320) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Select.queryWithoutCache(Select.java:826) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Query.queryWithoutCacheLazyCheck(Query.java:197) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Query.query(Query.java:520) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Query.query(Query.java:483) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.index.IndexCondition.getCurrentResult(IndexCondition.java:192) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.index.IndexCursor.prepare(IndexCursor.java:106) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.index.IndexCursor.find(IndexCursor.java:158) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.table.TableFilter.next(TableFilter.java:394) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Select.gatherGroup(Select.java:517) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Select.queryGroup(Select.java:488) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Select.queryWithoutCache(Select.java:828) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Query.queryWithoutCacheLazyCheck(Query.java:197) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Query.query(Query.java:520) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.query.Query.query(Query.java:483) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.CommandContainer.query(CommandContainer.java:252) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.command.Command.executeQuery(Command.java:191) ~[h2-2.2.220.jar:2.2.220]
	at org.h2.jdbc.JdbcPreparedStatement.executeQuery(JdbcPreparedStatement.java:128) ~[h2-2.2.220.jar:2.2.220]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:239) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:254) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:134) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:198) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:361) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:110) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:303) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:244) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:518) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:473) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy170.getSingleResult(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.13.jar:6.0.13]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy148.findBooksWithCommentsExcess(Unknown Source) ~[na:na]
	at ru.otus.hw.actuator.MaxCountOfCommentsHealthIndicator.health(MaxCountOfCommentsHealthIndicator.java:23) ~[classes/:na]
	at org.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.getHealth(HealthEndpointWebExtension.java:94) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.getHealth(HealthEndpointWebExtension.java:47) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getLoggedHealth(HealthEndpointSupport.java:172) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:145) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateContribution(HealthEndpointSupport.java:156) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:141) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:110) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:81) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:80) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:69) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281) ~[spring-core-6.0.13.jar:6.0.13]
	at org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:74) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$ServletWebOperationAdapter.handle(AbstractWebMvcEndpointHandlerMapping.java:321) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(AbstractWebMvcEndpointHandlerMapping.java:428) ~[spring-boot-actuator-3.1.5.jar:3.1.5]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.15.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.13.jar:6.0.13]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.15.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2024-10-10T18:00:33.429+03:00  INFO 6192 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:00:33.434+03:00  INFO 6192 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T18:00:33.437+03:00  INFO 6192 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T18:00:40.375+03:00  INFO 11888 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 11888 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T18:00:40.381+03:00  INFO 11888 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T18:00:42.853+03:00  INFO 11888 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T18:00:43.033+03:00  INFO 11888 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 161 ms. Found 4 JPA repository interfaces.
2024-10-10T18:00:44.396+03:00  INFO 11888 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T18:00:44.415+03:00  INFO 11888 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T18:00:44.415+03:00  INFO 11888 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T18:00:44.615+03:00  INFO 11888 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T18:00:44.616+03:00  INFO 11888 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4107 ms
2024-10-10T18:00:45.097+03:00  INFO 11888 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T18:00:45.449+03:00  INFO 11888 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T18:00:45.452+03:00  INFO 11888 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T18:00:45.585+03:00  INFO 11888 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T18:00:46.210+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T18:00:46.240+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T18:00:46.247+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T18:00:46.267+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T18:00:46.345+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T18:00:46.356+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T18:00:46.363+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T18:00:46.365+03:00  WARN 11888 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T18:00:46.366+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T18:00:46.367+03:00  WARN 11888 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T18:00:46.368+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T18:00:46.369+03:00  WARN 11888 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T18:00:46.370+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T18:00:46.371+03:00  WARN 11888 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T18:00:46.476+03:00  INFO 11888 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T18:00:46.711+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:00:46.878+03:00  INFO 11888 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T18:00:46.881+03:00  INFO 11888 --- [main] liquibase.command                        : Using deploymentId: 8572446880
2024-10-10T18:00:46.885+03:00  INFO 11888 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:00:46.968+03:00  INFO 11888 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:00:46.986+03:00  INFO 11888 --- [main] liquibase.changelog                      : Table author created
2024-10-10T18:00:46.988+03:00  INFO 11888 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 18ms
2024-10-10T18:00:47.005+03:00  INFO 11888 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:00:47.010+03:00  INFO 11888 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T18:00:47.011+03:00  INFO 11888 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T18:00:47.018+03:00  INFO 11888 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:00:47.036+03:00  INFO 11888 --- [main] liquibase.changelog                      : Table book created
2024-10-10T18:00:47.037+03:00  INFO 11888 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 17ms
2024-10-10T18:00:47.044+03:00  INFO 11888 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:00:47.053+03:00  INFO 11888 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T18:00:47.054+03:00  INFO 11888 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 9ms
2024-10-10T18:00:47.060+03:00  INFO 11888 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:00:47.113+03:00  INFO 11888 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:00:47.114+03:00  INFO 11888 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T18:00:47.114+03:00  INFO 11888 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 53ms
2024-10-10T18:00:47.118+03:00  INFO 11888 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:00:47.130+03:00  INFO 11888 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:00:47.130+03:00  INFO 11888 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T18:00:47.131+03:00  INFO 11888 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 12ms
2024-10-10T18:00:47.137+03:00  INFO 11888 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:00:47.151+03:00  INFO 11888 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:00:47.152+03:00  INFO 11888 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T18:00:47.152+03:00  INFO 11888 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 15ms
2024-10-10T18:00:47.158+03:00  INFO 11888 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:00:47.170+03:00  INFO 11888 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:00:47.170+03:00  INFO 11888 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T18:00:47.171+03:00  INFO 11888 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 12ms
2024-10-10T18:00:47.194+03:00  INFO 11888 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T18:00:47.195+03:00  INFO 11888 --- [main] liquibase.util                           : Run:                          8
2024-10-10T18:00:47.195+03:00  INFO 11888 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T18:00:47.195+03:00  INFO 11888 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T18:00:47.195+03:00  INFO 11888 --- [main] liquibase.util                           : -------------------------------
2024-10-10T18:00:47.195+03:00  INFO 11888 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T18:00:47.199+03:00  INFO 11888 --- [main] liquibase.util                           : Update summary generated
2024-10-10T18:00:47.207+03:00  INFO 11888 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T18:00:47.208+03:00  INFO 11888 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T18:00:47.211+03:00  INFO 11888 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T18:00:47.212+03:00  INFO 11888 --- [main] liquibase.command                        : Command execution complete
2024-10-10T18:00:47.396+03:00  INFO 11888 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T18:00:47.571+03:00  INFO 11888 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T18:00:47.576+03:00  INFO 11888 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T18:00:48.090+03:00  INFO 11888 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T18:00:49.659+03:00  INFO 11888 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T18:00:49.663+03:00  INFO 11888 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:00:50.273+03:00  INFO 11888 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T18:00:52.889+03:00  INFO 11888 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T18:00:53.032+03:00  INFO 11888 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T18:00:53.052+03:00  INFO 11888 --- [main] ru.otus.hw.Application                   : Started Application in 13.623 seconds (process running for 14.569)
2024-10-10T18:00:53.870+03:00  INFO 11888 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T18:00:53.870+03:00  INFO 11888 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T18:00:53.874+03:00  INFO 11888 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-10-10T18:02:52.733+03:00  INFO 11888 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:02:52.736+03:00  INFO 11888 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T18:02:52.740+03:00  INFO 11888 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T18:03:09.057+03:00  INFO 7208 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 7208 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T18:03:09.063+03:00  INFO 7208 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T18:03:11.568+03:00  INFO 7208 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T18:03:11.742+03:00  INFO 7208 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 156 ms. Found 4 JPA repository interfaces.
2024-10-10T18:03:13.028+03:00  INFO 7208 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T18:03:13.045+03:00  INFO 7208 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T18:03:13.046+03:00  INFO 7208 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T18:03:13.254+03:00  INFO 7208 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T18:03:13.254+03:00  INFO 7208 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4020 ms
2024-10-10T18:03:13.742+03:00  INFO 7208 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T18:03:14.100+03:00  INFO 7208 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T18:03:14.102+03:00  INFO 7208 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T18:03:14.224+03:00  INFO 7208 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T18:03:14.798+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T18:03:14.821+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T18:03:14.830+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T18:03:14.851+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T18:03:14.911+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T18:03:14.924+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T18:03:14.931+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T18:03:14.933+03:00  WARN 7208 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T18:03:14.934+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T18:03:14.935+03:00  WARN 7208 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T18:03:14.936+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T18:03:14.937+03:00  WARN 7208 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T18:03:14.937+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T18:03:14.939+03:00  WARN 7208 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T18:03:15.038+03:00  INFO 7208 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T18:03:15.240+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:03:15.378+03:00  INFO 7208 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T18:03:15.379+03:00  INFO 7208 --- [main] liquibase.command                        : Using deploymentId: 8572595379
2024-10-10T18:03:15.382+03:00  INFO 7208 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:03:15.428+03:00  INFO 7208 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:03:15.442+03:00  INFO 7208 --- [main] liquibase.changelog                      : Table author created
2024-10-10T18:03:15.445+03:00  INFO 7208 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 14ms
2024-10-10T18:03:15.493+03:00  INFO 7208 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:03:15.500+03:00  INFO 7208 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T18:03:15.501+03:00  INFO 7208 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 8ms
2024-10-10T18:03:15.507+03:00  INFO 7208 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:03:15.523+03:00  INFO 7208 --- [main] liquibase.changelog                      : Table book created
2024-10-10T18:03:15.523+03:00  INFO 7208 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 15ms
2024-10-10T18:03:15.531+03:00  INFO 7208 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:03:15.537+03:00  INFO 7208 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T18:03:15.537+03:00  INFO 7208 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 6ms
2024-10-10T18:03:15.542+03:00  INFO 7208 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:03:15.603+03:00  INFO 7208 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:03:15.603+03:00  INFO 7208 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T18:03:15.604+03:00  INFO 7208 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 61ms
2024-10-10T18:03:15.608+03:00  INFO 7208 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:03:15.620+03:00  INFO 7208 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:03:15.621+03:00  INFO 7208 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T18:03:15.621+03:00  INFO 7208 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 12ms
2024-10-10T18:03:15.628+03:00  INFO 7208 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:03:15.641+03:00  INFO 7208 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:03:15.642+03:00  INFO 7208 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T18:03:15.646+03:00  INFO 7208 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 18ms
2024-10-10T18:03:15.662+03:00  INFO 7208 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:03:15.693+03:00  INFO 7208 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:03:15.693+03:00  INFO 7208 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T18:03:15.694+03:00  INFO 7208 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 30ms
2024-10-10T18:03:15.736+03:00  INFO 7208 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T18:03:15.736+03:00  INFO 7208 --- [main] liquibase.util                           : Run:                          8
2024-10-10T18:03:15.736+03:00  INFO 7208 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T18:03:15.737+03:00  INFO 7208 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T18:03:15.738+03:00  INFO 7208 --- [main] liquibase.util                           : -------------------------------
2024-10-10T18:03:15.739+03:00  INFO 7208 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T18:03:15.742+03:00  INFO 7208 --- [main] liquibase.util                           : Update summary generated
2024-10-10T18:03:15.751+03:00  INFO 7208 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T18:03:15.751+03:00  INFO 7208 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T18:03:15.754+03:00  INFO 7208 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T18:03:15.756+03:00  INFO 7208 --- [main] liquibase.command                        : Command execution complete
2024-10-10T18:03:15.867+03:00  INFO 7208 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T18:03:16.008+03:00  INFO 7208 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T18:03:16.012+03:00  INFO 7208 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T18:03:16.512+03:00  INFO 7208 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T18:03:17.852+03:00  INFO 7208 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T18:03:17.856+03:00  INFO 7208 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:03:18.364+03:00  INFO 7208 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T18:03:20.800+03:00  INFO 7208 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T18:03:20.933+03:00  INFO 7208 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T18:03:20.957+03:00  INFO 7208 --- [main] ru.otus.hw.Application                   : Started Application in 12.84 seconds (process running for 13.714)
2024-10-10T18:03:22.952+03:00  INFO 7208 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T18:03:22.952+03:00  INFO 7208 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T18:03:22.955+03:00  INFO 7208 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-10-10T18:03:51.719+03:00  INFO 7208 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:03:51.725+03:00  INFO 7208 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T18:03:51.732+03:00  INFO 7208 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T18:13:54.691+03:00  INFO 2184 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 2184 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T18:13:54.698+03:00  INFO 2184 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T18:13:57.352+03:00  INFO 2184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T18:13:57.529+03:00  INFO 2184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 159 ms. Found 4 JPA repository interfaces.
2024-10-10T18:13:59.044+03:00  INFO 2184 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T18:13:59.064+03:00  INFO 2184 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T18:13:59.065+03:00  INFO 2184 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T18:13:59.311+03:00  INFO 2184 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T18:13:59.312+03:00  INFO 2184 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4479 ms
2024-10-10T18:13:59.868+03:00  INFO 2184 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T18:14:00.287+03:00  INFO 2184 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T18:14:00.290+03:00  INFO 2184 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T18:14:00.429+03:00  INFO 2184 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T18:14:01.114+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T18:14:01.134+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T18:14:01.141+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T18:14:01.190+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T18:14:01.285+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T18:14:01.297+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T18:14:01.305+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T18:14:01.307+03:00  WARN 2184 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T18:14:01.307+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T18:14:01.309+03:00  WARN 2184 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T18:14:01.309+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T18:14:01.310+03:00  WARN 2184 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T18:14:01.311+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T18:14:01.312+03:00  WARN 2184 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T18:14:01.425+03:00  INFO 2184 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T18:14:01.611+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:14:01.760+03:00  INFO 2184 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T18:14:01.762+03:00  INFO 2184 --- [main] liquibase.command                        : Using deploymentId: 8573241761
2024-10-10T18:14:01.765+03:00  INFO 2184 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:14:01.812+03:00  INFO 2184 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:14:01.827+03:00  INFO 2184 --- [main] liquibase.changelog                      : Table author created
2024-10-10T18:14:01.829+03:00  INFO 2184 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 14ms
2024-10-10T18:14:01.841+03:00  INFO 2184 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:14:01.845+03:00  INFO 2184 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T18:14:01.846+03:00  INFO 2184 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T18:14:01.852+03:00  INFO 2184 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:14:01.867+03:00  INFO 2184 --- [main] liquibase.changelog                      : Table book created
2024-10-10T18:14:01.867+03:00  INFO 2184 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 14ms
2024-10-10T18:14:01.874+03:00  INFO 2184 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:14:01.880+03:00  INFO 2184 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T18:14:01.881+03:00  INFO 2184 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T18:14:01.887+03:00  INFO 2184 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:14:01.952+03:00  INFO 2184 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:14:01.953+03:00  INFO 2184 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T18:14:01.954+03:00  INFO 2184 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 66ms
2024-10-10T18:14:01.960+03:00  INFO 2184 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:14:01.979+03:00  INFO 2184 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:14:01.979+03:00  INFO 2184 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T18:14:01.980+03:00  INFO 2184 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 20ms
2024-10-10T18:14:01.996+03:00  INFO 2184 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:14:02.049+03:00  INFO 2184 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:14:02.051+03:00  INFO 2184 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T18:14:02.051+03:00  INFO 2184 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 54ms
2024-10-10T18:14:02.066+03:00  INFO 2184 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:14:02.088+03:00  INFO 2184 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:14:02.088+03:00  INFO 2184 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T18:14:02.089+03:00  INFO 2184 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 22ms
2024-10-10T18:14:02.105+03:00  INFO 2184 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T18:14:02.105+03:00  INFO 2184 --- [main] liquibase.util                           : Run:                          8
2024-10-10T18:14:02.106+03:00  INFO 2184 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T18:14:02.106+03:00  INFO 2184 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T18:14:02.106+03:00  INFO 2184 --- [main] liquibase.util                           : -------------------------------
2024-10-10T18:14:02.106+03:00  INFO 2184 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T18:14:02.108+03:00  INFO 2184 --- [main] liquibase.util                           : Update summary generated
2024-10-10T18:14:02.113+03:00  INFO 2184 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T18:14:02.113+03:00  INFO 2184 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T18:14:02.116+03:00  INFO 2184 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T18:14:02.117+03:00  INFO 2184 --- [main] liquibase.command                        : Command execution complete
2024-10-10T18:14:02.259+03:00  INFO 2184 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T18:14:02.374+03:00  INFO 2184 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T18:14:02.378+03:00  INFO 2184 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T18:14:02.870+03:00  INFO 2184 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T18:14:04.519+03:00  INFO 2184 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T18:14:04.525+03:00  INFO 2184 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:14:04.980+03:00  INFO 2184 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T18:14:07.441+03:00  INFO 2184 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T18:14:07.573+03:00  INFO 2184 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T18:14:07.597+03:00  INFO 2184 --- [main] ru.otus.hw.Application                   : Started Application in 13.931 seconds (process running for 14.907)
2024-10-10T18:14:09.329+03:00  INFO 2184 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T18:14:09.330+03:00  INFO 2184 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T18:14:09.334+03:00  INFO 2184 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2024-10-10T18:15:24.787+03:00  INFO 2184 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:15:24.796+03:00  INFO 2184 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T18:15:24.806+03:00  INFO 2184 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T18:16:35.912+03:00  INFO 4584 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 4584 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T18:16:35.918+03:00  INFO 4584 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T18:16:38.349+03:00  INFO 4584 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T18:16:38.526+03:00  INFO 4584 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 159 ms. Found 4 JPA repository interfaces.
2024-10-10T18:16:39.877+03:00  INFO 4584 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T18:16:39.899+03:00  INFO 4584 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T18:16:39.900+03:00  INFO 4584 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T18:16:40.125+03:00  INFO 4584 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T18:16:40.126+03:00  INFO 4584 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4050 ms
2024-10-10T18:16:40.597+03:00  INFO 4584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T18:16:40.960+03:00  INFO 4584 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T18:16:40.963+03:00  INFO 4584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T18:16:41.097+03:00  INFO 4584 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T18:16:41.620+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T18:16:41.643+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T18:16:41.650+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T18:16:41.668+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T18:16:41.722+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T18:16:41.769+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T18:16:41.790+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T18:16:41.792+03:00  WARN 4584 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T18:16:41.792+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T18:16:41.797+03:00  WARN 4584 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T18:16:41.797+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T18:16:41.799+03:00  WARN 4584 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T18:16:41.799+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T18:16:41.802+03:00  WARN 4584 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T18:16:41.911+03:00  INFO 4584 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T18:16:42.090+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:16:42.221+03:00  INFO 4584 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T18:16:42.222+03:00  INFO 4584 --- [main] liquibase.command                        : Using deploymentId: 8573402222
2024-10-10T18:16:42.225+03:00  INFO 4584 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:16:42.272+03:00  INFO 4584 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:16:42.285+03:00  INFO 4584 --- [main] liquibase.changelog                      : Table author created
2024-10-10T18:16:42.287+03:00  INFO 4584 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 13ms
2024-10-10T18:16:42.299+03:00  INFO 4584 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:16:42.304+03:00  INFO 4584 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T18:16:42.305+03:00  INFO 4584 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T18:16:42.312+03:00  INFO 4584 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:16:42.330+03:00  INFO 4584 --- [main] liquibase.changelog                      : Table book created
2024-10-10T18:16:42.331+03:00  INFO 4584 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 19ms
2024-10-10T18:16:42.337+03:00  INFO 4584 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:16:42.343+03:00  INFO 4584 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T18:16:42.344+03:00  INFO 4584 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T18:16:42.349+03:00  INFO 4584 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:16:42.404+03:00  INFO 4584 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:16:42.405+03:00  INFO 4584 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T18:16:42.405+03:00  INFO 4584 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 55ms
2024-10-10T18:16:42.411+03:00  INFO 4584 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:16:42.421+03:00  INFO 4584 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:16:42.422+03:00  INFO 4584 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T18:16:42.423+03:00  INFO 4584 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 11ms
2024-10-10T18:16:42.430+03:00  INFO 4584 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:16:42.461+03:00  INFO 4584 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:16:42.463+03:00  INFO 4584 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T18:16:42.465+03:00  INFO 4584 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 34ms
2024-10-10T18:16:42.472+03:00  INFO 4584 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:16:42.490+03:00  INFO 4584 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:16:42.491+03:00  INFO 4584 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T18:16:42.491+03:00  INFO 4584 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 19ms
2024-10-10T18:16:42.508+03:00  INFO 4584 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T18:16:42.509+03:00  INFO 4584 --- [main] liquibase.util                           : Run:                          8
2024-10-10T18:16:42.510+03:00  INFO 4584 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T18:16:42.510+03:00  INFO 4584 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T18:16:42.511+03:00  INFO 4584 --- [main] liquibase.util                           : -------------------------------
2024-10-10T18:16:42.511+03:00  INFO 4584 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T18:16:42.512+03:00  INFO 4584 --- [main] liquibase.util                           : Update summary generated
2024-10-10T18:16:42.517+03:00  INFO 4584 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T18:16:42.517+03:00  INFO 4584 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T18:16:42.520+03:00  INFO 4584 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T18:16:42.521+03:00  INFO 4584 --- [main] liquibase.command                        : Command execution complete
2024-10-10T18:16:42.638+03:00  INFO 4584 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T18:16:42.759+03:00  INFO 4584 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T18:16:42.763+03:00  INFO 4584 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T18:16:43.250+03:00  INFO 4584 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T18:16:44.611+03:00  INFO 4584 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T18:16:44.616+03:00  INFO 4584 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:16:45.095+03:00  INFO 4584 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T18:16:45.539+03:00  WARN 4584 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
2024-10-10T18:16:45.539+03:00  INFO 4584 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:16:45.543+03:00  INFO 4584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T18:16:45.548+03:00  INFO 4584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T18:16:45.552+03:00  INFO 4584 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-10-10T18:16:45.579+03:00  INFO 4584 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-10T18:16:45.611+03:00 ERROR 4584 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'maxCountOfCommentsHealthIndicator' defined in file [C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes\ru\otus\hw\actuator\MaxCountOfCommentsHealthIndicator.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]
	at ru.otus.hw.Application.main(Application.java:10) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.otus.hw.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:910) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-6.0.13.jar:6.0.13]
	... 19 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int); Reason: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]
	... 30 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int ru.otus.hw.repository.CommentRepository.findBooksWithCommentsExcess(int)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.5.jar:3.1.5]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.ParsingException: line 1:31 mismatched input 'in' expecting {<EOF>, ',', CROSS, FULL, GROUP, INNER, JOIN, LEFT, ORDER, OUTER, RIGHT, WHERE}
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.13.jar:6.0.13]
	at jdk.proxy2/jdk.proxy2.$Proxy142.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.5.jar:3.1.5]
	... 48 common frames omitted
Caused by: org.hibernate.query.sqm.ParsingException: line 1:31 mismatched input 'in' expecting {<EOF>, ',', CROSS, FULL, GROUP, INNER, JOIN, LEFT, ORDER, OUTER, RIGHT, WHERE}
	at org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:46) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:543) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportInputMismatch(DefaultErrorStrategy.java:327) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:139) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.hibernate.grammars.hql.HqlParser.statement(HqlParser.java:361) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:127) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:77) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]
	... 57 common frames omitted

2024-10-10T18:19:51.862+03:00  INFO 5500 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 5500 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T18:19:51.867+03:00  INFO 5500 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T18:19:54.307+03:00  INFO 5500 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T18:19:54.478+03:00  INFO 5500 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 154 ms. Found 4 JPA repository interfaces.
2024-10-10T18:19:55.768+03:00  INFO 5500 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T18:19:55.784+03:00  INFO 5500 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T18:19:55.784+03:00  INFO 5500 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T18:19:55.989+03:00  INFO 5500 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T18:19:55.992+03:00  INFO 5500 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3994 ms
2024-10-10T18:19:56.480+03:00  INFO 5500 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T18:19:56.845+03:00  INFO 5500 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T18:19:56.848+03:00  INFO 5500 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T18:19:56.975+03:00  INFO 5500 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T18:19:57.513+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T18:19:57.538+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T18:19:57.545+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T18:19:57.564+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T18:19:57.614+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T18:19:57.627+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T18:19:57.634+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T18:19:57.636+03:00  WARN 5500 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T18:19:57.637+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T18:19:57.638+03:00  WARN 5500 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T18:19:57.638+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T18:19:57.640+03:00  WARN 5500 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T18:19:57.640+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T18:19:57.641+03:00  WARN 5500 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T18:19:57.745+03:00  INFO 5500 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T18:19:57.939+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:19:58.078+03:00  INFO 5500 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T18:19:58.080+03:00  INFO 5500 --- [main] liquibase.command                        : Using deploymentId: 8573598080
2024-10-10T18:19:58.083+03:00  INFO 5500 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:19:58.130+03:00  INFO 5500 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:19:58.143+03:00  INFO 5500 --- [main] liquibase.changelog                      : Table author created
2024-10-10T18:19:58.145+03:00  INFO 5500 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 13ms
2024-10-10T18:19:58.158+03:00  INFO 5500 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:19:58.163+03:00  INFO 5500 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T18:19:58.164+03:00  INFO 5500 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 5ms
2024-10-10T18:19:58.171+03:00  INFO 5500 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:19:58.190+03:00  INFO 5500 --- [main] liquibase.changelog                      : Table book created
2024-10-10T18:19:58.191+03:00  INFO 5500 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 20ms
2024-10-10T18:19:58.198+03:00  INFO 5500 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:19:58.204+03:00  INFO 5500 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T18:19:58.205+03:00  INFO 5500 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T18:19:58.210+03:00  INFO 5500 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:19:58.271+03:00  INFO 5500 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:19:58.271+03:00  INFO 5500 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T18:19:58.272+03:00  INFO 5500 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 60ms
2024-10-10T18:19:58.276+03:00  INFO 5500 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:19:58.296+03:00  INFO 5500 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:19:58.296+03:00  INFO 5500 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T18:19:58.297+03:00  INFO 5500 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 21ms
2024-10-10T18:19:58.308+03:00  INFO 5500 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:19:58.328+03:00  INFO 5500 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:19:58.329+03:00  INFO 5500 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T18:19:58.330+03:00  INFO 5500 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 21ms
2024-10-10T18:19:58.336+03:00  INFO 5500 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:19:58.361+03:00  INFO 5500 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:19:58.361+03:00  INFO 5500 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T18:19:58.362+03:00  INFO 5500 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 26ms
2024-10-10T18:19:58.382+03:00  INFO 5500 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T18:19:58.383+03:00  INFO 5500 --- [main] liquibase.util                           : Run:                          8
2024-10-10T18:19:58.383+03:00  INFO 5500 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T18:19:58.383+03:00  INFO 5500 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T18:19:58.383+03:00  INFO 5500 --- [main] liquibase.util                           : -------------------------------
2024-10-10T18:19:58.383+03:00  INFO 5500 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T18:19:58.385+03:00  INFO 5500 --- [main] liquibase.util                           : Update summary generated
2024-10-10T18:19:58.389+03:00  INFO 5500 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T18:19:58.389+03:00  INFO 5500 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T18:19:58.392+03:00  INFO 5500 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T18:19:58.394+03:00  INFO 5500 --- [main] liquibase.command                        : Command execution complete
2024-10-10T18:19:58.503+03:00  INFO 5500 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T18:19:58.649+03:00  INFO 5500 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T18:19:58.654+03:00  INFO 5500 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T18:19:59.147+03:00  INFO 5500 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T18:20:00.782+03:00  INFO 5500 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T18:20:00.786+03:00  INFO 5500 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:20:01.276+03:00  INFO 5500 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T18:20:03.711+03:00  INFO 5500 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T18:20:03.846+03:00  INFO 5500 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T18:20:03.869+03:00  INFO 5500 --- [main] ru.otus.hw.Application                   : Started Application in 12.946 seconds (process running for 13.807)
2024-10-10T18:20:15.129+03:00  INFO 5500 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T18:20:15.130+03:00  INFO 5500 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T18:20:15.134+03:00  INFO 5500 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-10-10T18:21:13.832+03:00  INFO 5500 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:21:13.834+03:00  INFO 5500 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T18:21:13.839+03:00  INFO 5500 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T18:56:27.017+03:00  INFO 7344 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 7344 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T18:56:27.023+03:00  INFO 7344 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T18:56:29.510+03:00  INFO 7344 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T18:56:29.687+03:00  INFO 7344 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 158 ms. Found 4 JPA repository interfaces.
2024-10-10T18:56:31.083+03:00  INFO 7344 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T18:56:31.102+03:00  INFO 7344 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T18:56:31.103+03:00  INFO 7344 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T18:56:31.310+03:00  INFO 7344 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T18:56:31.314+03:00  INFO 7344 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4134 ms
2024-10-10T18:56:31.877+03:00  INFO 7344 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T18:56:32.298+03:00  INFO 7344 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T18:56:32.301+03:00  INFO 7344 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T18:56:32.431+03:00  INFO 7344 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T18:56:33.149+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T18:56:33.175+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T18:56:33.183+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T18:56:33.206+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T18:56:33.303+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T18:56:33.322+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T18:56:33.330+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T18:56:33.335+03:00  WARN 7344 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T18:56:33.336+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T18:56:33.338+03:00  WARN 7344 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T18:56:33.338+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T18:56:33.340+03:00  WARN 7344 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T18:56:33.341+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T18:56:33.342+03:00  WARN 7344 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T18:56:33.515+03:00  INFO 7344 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T18:56:34.466+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:56:34.756+03:00  INFO 7344 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T18:56:34.759+03:00  INFO 7344 --- [main] liquibase.command                        : Using deploymentId: 8575794759
2024-10-10T18:56:34.775+03:00  INFO 7344 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T18:56:34.864+03:00  INFO 7344 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:56:34.907+03:00  INFO 7344 --- [main] liquibase.changelog                      : Table author created
2024-10-10T18:56:34.912+03:00  INFO 7344 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 43ms
2024-10-10T18:56:34.931+03:00  INFO 7344 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:56:34.936+03:00  INFO 7344 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T18:56:34.936+03:00  INFO 7344 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 4ms
2024-10-10T18:56:34.943+03:00  INFO 7344 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:56:34.958+03:00  INFO 7344 --- [main] liquibase.changelog                      : Table book created
2024-10-10T18:56:34.959+03:00  INFO 7344 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 16ms
2024-10-10T18:56:34.966+03:00  INFO 7344 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:56:34.973+03:00  INFO 7344 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T18:56:34.974+03:00  INFO 7344 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 6ms
2024-10-10T18:56:34.981+03:00  INFO 7344 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T18:56:35.076+03:00  INFO 7344 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:56:35.076+03:00  INFO 7344 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T18:56:35.077+03:00  INFO 7344 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 95ms
2024-10-10T18:56:35.084+03:00  INFO 7344 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T18:56:35.102+03:00  INFO 7344 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:56:35.102+03:00  INFO 7344 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T18:56:35.103+03:00  INFO 7344 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 19ms
2024-10-10T18:56:35.111+03:00  INFO 7344 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T18:56:35.139+03:00  INFO 7344 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:56:35.139+03:00  INFO 7344 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T18:56:35.141+03:00  INFO 7344 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 28ms
2024-10-10T18:56:35.147+03:00  INFO 7344 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T18:56:35.167+03:00  INFO 7344 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T18:56:35.167+03:00  INFO 7344 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T18:56:35.168+03:00  INFO 7344 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 20ms
2024-10-10T18:56:35.203+03:00  INFO 7344 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T18:56:35.204+03:00  INFO 7344 --- [main] liquibase.util                           : Run:                          8
2024-10-10T18:56:35.205+03:00  INFO 7344 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T18:56:35.205+03:00  INFO 7344 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T18:56:35.206+03:00  INFO 7344 --- [main] liquibase.util                           : -------------------------------
2024-10-10T18:56:35.206+03:00  INFO 7344 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T18:56:35.208+03:00  INFO 7344 --- [main] liquibase.util                           : Update summary generated
2024-10-10T18:56:35.219+03:00  INFO 7344 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T18:56:35.220+03:00  INFO 7344 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T18:56:35.226+03:00  INFO 7344 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T18:56:35.232+03:00  INFO 7344 --- [main] liquibase.command                        : Command execution complete
2024-10-10T18:56:35.427+03:00  INFO 7344 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T18:56:35.556+03:00  INFO 7344 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T18:56:35.562+03:00  INFO 7344 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T18:56:36.106+03:00  INFO 7344 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T18:56:38.079+03:00  INFO 7344 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T18:56:38.087+03:00  INFO 7344 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:56:38.850+03:00  INFO 7344 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T18:56:42.102+03:00  INFO 7344 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T18:56:42.268+03:00  INFO 7344 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T18:56:42.296+03:00  INFO 7344 --- [main] ru.otus.hw.Application                   : Started Application in 16.213 seconds (process running for 17.284)
2024-10-10T18:58:02.107+03:00  INFO 7344 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T18:58:02.108+03:00  INFO 7344 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T18:58:02.165+03:00  INFO 7344 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 31 ms
2024-10-10T18:58:47.478+03:00  INFO 7344 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T18:58:47.481+03:00  INFO 7344 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T18:58:47.485+03:00  INFO 7344 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-10-10T19:08:45.226+03:00  INFO 4272 --- [main] ru.otus.hw.Application                   : Starting Application using Java 17.0.1 with PID 4272 (C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15\target\classes started by admin in C:\Users\admin\Desktop\Разработчик Java\8. Обучение ОТУС\2. Домашние задания\2024-05-otus-spring-Ruchev\hw15)
2024-10-10T19:08:45.231+03:00  INFO 4272 --- [main] ru.otus.hw.Application                   : No active profile set, falling back to 1 default profile: "default"
2024-10-10T19:08:47.691+03:00  INFO 4272 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-10T19:08:47.873+03:00  INFO 4272 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 155 ms. Found 4 JPA repository interfaces.
2024-10-10T19:08:49.217+03:00  INFO 4272 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-10-10T19:08:49.234+03:00  INFO 4272 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-10-10T19:08:49.234+03:00  INFO 4272 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]
2024-10-10T19:08:49.448+03:00  INFO 4272 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-10-10T19:08:49.449+03:00  INFO 4272 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4076 ms
2024-10-10T19:08:49.973+03:00  INFO 4272 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-10-10T19:08:50.328+03:00  INFO 4272 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:maindb user=SA
2024-10-10T19:08:50.331+03:00  INFO 4272 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-10-10T19:08:50.433+03:00  INFO 4272 --- [main] liquibase.database                       : Set default schema name to PUBLIC
2024-10-10T19:08:50.972+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0001-author.yml
2024-10-10T19:08:51.005+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0002-genre.yml
2024-10-10T19:08:51.012+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/1.0/2024-07-18--0003-book.yml
2024-10-10T19:08:51.033+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/2.0/2024-07-19--0001-comment.yml
2024-10-10T19:08:51.100+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-18--0001-hw06-data.yml
2024-10-10T19:08:51.137+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/2024-07-19--0001-hw06-data.yml
2024-10-10T19:08:51.142+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0001-author.csv
2024-10-10T19:08:51.144+03:00  WARN 4272 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0001-author.csv/db/changelog/data/data/2024-07-18--0001-author.csv is not a recognized file type
2024-10-10T19:08:51.145+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0002-genre.csv
2024-10-10T19:08:51.146+03:00  WARN 4272 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0002-genre.csv/db/changelog/data/data/2024-07-18--0002-genre.csv is not a recognized file type
2024-10-10T19:08:51.147+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-18--0003-book.csv
2024-10-10T19:08:51.148+03:00  WARN 4272 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-18--0003-book.csv/db/changelog/data/data/2024-07-18--0003-book.csv is not a recognized file type
2024-10-10T19:08:51.149+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading resource: db/changelog/data/data/2024-07-19--0001-comment.csv
2024-10-10T19:08:51.151+03:00  WARN 4272 --- [main] liquibase.changelog                      : included file db/changelog/data/data/2024-07-19--0001-comment.csv/db/changelog/data/data/2024-07-19--0001-comment.csv is not a recognized file type
2024-10-10T19:08:51.251+03:00  INFO 4272 --- [main] liquibase.changelog                      : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-10-10T19:08:51.419+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T19:08:51.572+03:00  INFO 4272 --- [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-10-10T19:08:51.574+03:00  INFO 4272 --- [main] liquibase.command                        : Using deploymentId: 8576531574
2024-10-10T19:08:51.578+03:00  INFO 4272 --- [main] liquibase.changelog                      : Reading from PUBLIC.DATABASECHANGELOG
2024-10-10T19:08:51.622+03:00  INFO 4272 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev
2024-10-10T19:08:51.637+03:00  INFO 4272 --- [main] liquibase.changelog                      : Table author created
2024-10-10T19:08:51.639+03:00  INFO 4272 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0001-author.yml::2024-07-18--0001-author::ruchev ran successfully in 14ms
2024-10-10T19:08:51.651+03:00  INFO 4272 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev
2024-10-10T19:08:51.655+03:00  INFO 4272 --- [main] liquibase.changelog                      : Table genre created
2024-10-10T19:08:51.657+03:00  INFO 4272 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0002-genre.yml::2024-07-18--0002-genre::ruchev ran successfully in 6ms
2024-10-10T19:08:51.665+03:00  INFO 4272 --- [main] liquibase.ui                             : Running Changeset: db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev
2024-10-10T19:08:51.681+03:00  INFO 4272 --- [main] liquibase.changelog                      : Table book created
2024-10-10T19:08:51.682+03:00  INFO 4272 --- [main] liquibase.changelog                      : ChangeSet db/changelog/1.0/2024-07-18--0003-book.yml::2024-07-18--0003-book::ruchev ran successfully in 16ms
2024-10-10T19:08:51.690+03:00  INFO 4272 --- [main] liquibase.ui                             : Running Changeset: db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev
2024-10-10T19:08:51.698+03:00  INFO 4272 --- [main] liquibase.changelog                      : Table comment created
2024-10-10T19:08:51.698+03:00  INFO 4272 --- [main] liquibase.changelog                      : ChangeSet db/changelog/2.0/2024-07-19--0001-comment.yml::2024-07-19--0001-comment::ruchev ran successfully in 7ms
2024-10-10T19:08:51.706+03:00  INFO 4272 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev
2024-10-10T19:08:51.756+03:00  INFO 4272 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T19:08:51.756+03:00  INFO 4272 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0001-author.csv' into table 'author'
2024-10-10T19:08:51.756+03:00  INFO 4272 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0001-author::ruchev ran successfully in 49ms
2024-10-10T19:08:51.760+03:00  INFO 4272 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev
2024-10-10T19:08:51.771+03:00  INFO 4272 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T19:08:51.771+03:00  INFO 4272 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0002-genre.csv' into table 'genre'
2024-10-10T19:08:51.772+03:00  INFO 4272 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0002-genre::ruchev ran successfully in 10ms
2024-10-10T19:08:51.783+03:00  INFO 4272 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev
2024-10-10T19:08:51.805+03:00  INFO 4272 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T19:08:51.808+03:00  INFO 4272 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-18--0003-book.csv' into table 'book'
2024-10-10T19:08:51.812+03:00  INFO 4272 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-18--0001-hw06-data.yml::2024-07-18--0003-book::ruchev ran successfully in 27ms
2024-10-10T19:08:51.825+03:00  INFO 4272 --- [main] liquibase.ui                             : Running Changeset: db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev
2024-10-10T19:08:51.852+03:00  INFO 4272 --- [main] liquibase.statement                      : Executing JDBC DML batch was successful. 3 operations were executed, 1 individual UPDATE events were confirmed by the database.
2024-10-10T19:08:51.853+03:00  INFO 4272 --- [main] liquibase.changelog                      : Data loaded from 'data/2024-07-19--0001-comment.csv' into table 'comment'
2024-10-10T19:08:51.854+03:00  INFO 4272 --- [main] liquibase.changelog                      : ChangeSet db/changelog/data/2024-07-19--0001-hw06-data.yml::2024-07-19--0001-comment::ruchev ran successfully in 28ms
2024-10-10T19:08:51.881+03:00  INFO 4272 --- [main] liquibase.util                           : UPDATE SUMMARY
2024-10-10T19:08:51.882+03:00  INFO 4272 --- [main] liquibase.util                           : Run:                          8
2024-10-10T19:08:51.882+03:00  INFO 4272 --- [main] liquibase.util                           : Previously run:               0
2024-10-10T19:08:51.882+03:00  INFO 4272 --- [main] liquibase.util                           : Filtered out:                 0
2024-10-10T19:08:51.882+03:00  INFO 4272 --- [main] liquibase.util                           : -------------------------------
2024-10-10T19:08:51.883+03:00  INFO 4272 --- [main] liquibase.util                           : Total change sets:            8
2024-10-10T19:08:51.885+03:00  INFO 4272 --- [main] liquibase.util                           : Update summary generated
2024-10-10T19:08:51.888+03:00  INFO 4272 --- [main] liquibase.command                        : Update command completed successfully.
2024-10-10T19:08:51.888+03:00  INFO 4272 --- [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 8
2024-10-10T19:08:51.891+03:00  INFO 4272 --- [main] liquibase.lockservice                    : Successfully released change log lock
2024-10-10T19:08:51.892+03:00  INFO 4272 --- [main] liquibase.command                        : Command execution complete
2024-10-10T19:08:52.010+03:00  INFO 4272 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-10T19:08:52.147+03:00  INFO 4272 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final
2024-10-10T19:08:52.152+03:00  INFO 4272 --- [main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2024-10-10T19:08:52.638+03:00  INFO 4272 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-10T19:08:53.984+03:00  INFO 4272 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-10T19:08:53.988+03:00  INFO 4272 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T19:08:54.548+03:00  INFO 4272 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-10T19:08:56.793+03:00  INFO 4272 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/monitor'
2024-10-10T19:08:56.934+03:00  INFO 4272 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2024-10-10T19:08:56.956+03:00  INFO 4272 --- [main] ru.otus.hw.Application                   : Started Application in 12.68 seconds (process running for 13.499)
2024-10-10T19:09:55.884+03:00  INFO 4272 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-10T19:09:55.885+03:00  INFO 4272 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-10-10T19:09:55.888+03:00  INFO 4272 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-10-10T19:12:58.662+03:00  INFO 4272 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-10T19:12:58.666+03:00  INFO 4272 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-10-10T19:12:58.672+03:00  INFO 4272 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
